console.group(`renderer.ts`);
Object.defineProperty(Object.prototype, "keys", {
    enumerable: false,
    value() {
        return Object.keys(this).map(key => key.isdigit()
            ? parseInt(key) : key);
    }
});
Object.defineProperty(Array.prototype, "lazy", {
    enumerable: false,
    *value(fn) {
        for (let x in this) {
            yield fn(x);
        }
    }
});
Object.defineProperty(Array.prototype, "last", {
    enumerable: false,
    value() {
        return this[this.length - 1];
    }
});
Object.defineProperty(Array.prototype, "lowerAll", {
    enumerable: false,
    value() {
        if (!util.bool(this._lowerAll)) {
            this._lowerAll = [];
            for (let x of this) {
                this._lowerAll.push(x.lower());
            }
        }
        return this._lowerAll;
    }
});
Object.defineProperty(Array.prototype, "rsort", {
    enumerable: false,
    value() {
        return this.sort((n, m) => n < m);
    }
});
Object.defineProperty(Array.prototype, "count", {
    enumerable: false,
    value(item) {
        let _count = 0;
        if (util.isFunction(item)) {
            for (let x of this) {
                if (item(x)) {
                    _count++;
                }
            }
        }
        else {
            for (let x of this) {
                if (x === item) {
                    _count++;
                }
            }
            return _count;
        }
    }
});
Object.defineProperty(String.prototype, "endsWithAny", {
    enumerable: false,
    value(...args) {
        for (let x of args) {
            if (this.endsWith(x)) {
                return true;
            }
        }
        return false;
    }
});
Object.defineProperty(String.prototype, "upTo", {
    enumerable: false,
    value(searchString, searchFromEnd = false) {
        let end = searchFromEnd
            ? this.lastIndexOf(searchString)
            : this.indexOf(searchString);
        if (end === -1)
            console.warn(`${this.valueOf()}.upTo(${searchString},${searchFromEnd}) index is -1`);
        return this.slice(0, end);
    }
});
Object.defineProperty(String.prototype, "in", {
    enumerable: false,
    value(arr) {
        return arr.includes(this.valueOf());
    }
});
Object.defineProperty(String.prototype, "lower", {
    enumerable: false,
    value() {
        return this.toLowerCase();
    }
});
Object.defineProperty(String.prototype, "upper", {
    enumerable: false,
    value() {
        return this.toUpperCase();
    }
});
Object.defineProperty(String.prototype, "title", {
    enumerable: false,
    value() {
        if (this.includes(' ')) {
            return this.split(' ').map(str => str.title()).join(' ');
        }
        else {
            if (this.match(/[_\-.]/)) {
                let temp = this.replaceAll(/[_\-.]/, ' ');
                return temp.title();
            }
            else {
                return this[0].upper() + this.slice(1, this.length).lower();
            }
        }
    }
});
Object.defineProperty(String.prototype, "isdigit", {
    enumerable: false,
    value() {
        return !isNaN(Math.floor(this));
    }
});
Object.defineProperty(String.prototype, "removeAll", {
    enumerable: false,
    value(removeValue, ...removeValues) {
        let temp = this;
        for (let value of [removeValue, ...removeValues])
            temp = temp.replaceAll(value, '');
        return temp;
    }
});
Object.defineProperty(String.prototype, "replaceAll", {
    enumerable: false,
    value(searchValue, replaceValue) {
        const type = typeof searchValue;
        if (type === 'string' || type === 'number') {
            return this
                .split(searchValue)
                .join(replaceValue);
        }
        else if (type === 'object') {
            if (searchValue.compile) {
                let temp = this;
                let replaced = temp.replace(searchValue, replaceValue);
                while (replaced !== temp) {
                    temp = replaced;
                    replaced = replaced.replace(searchValue, replaceValue);
                }
                return replaced;
            }
            else {
                let temp = this;
                for (let [sv, rv] of Object.entries(searchValue))
                    temp = temp.replaceAll(sv, rv);
                return temp;
            }
        }
        else {
            console.warn(`replaceAll got a bad type, searchValue: ${searchValue}, type: ${type}`);
            return this;
        }
    }
});
Object.defineProperty(Number.prototype, "human", {
    enumerable: false,
    value(letters = false) {
        const floored = Math.floor(this);
        switch (floored) {
            case 0:
                return letters
                    ? "zeroth"
                    : "0th";
            case 1:
                return letters
                    ? "first"
                    : "1st";
            case 2:
                return letters
                    ? "second"
                    : "2nd";
            case 3:
                return letters
                    ? "third"
                    : "3rd";
            case 4:
                return letters
                    ? "fourth"
                    : "4th";
            case 5:
                return letters
                    ? "fifth"
                    : "5th";
            case 6:
                return letters
                    ? "sixth"
                    : "6th";
            case 7:
                return letters
                    ? "seventh"
                    : "7th";
            case 8:
                return letters
                    ? "eighth"
                    : "8th";
            case 9:
                return letters
                    ? "ninth"
                    : "9th";
            case 10:
                return letters
                    ? "tenth"
                    : "10th";
            case 11:
                return letters
                    ? "eleventh"
                    : "11th";
            case 12:
                return letters
                    ? "twelveth"
                    : "12th";
            case 13:
                return letters
                    ? "thirteenth"
                    : "13th";
            case 14:
                return letters
                    ? "fourteenth"
                    : "14th";
            case 15:
                return letters
                    ? "fifteenth"
                    : "15th";
            case 16:
                return letters
                    ? "sixteenth"
                    : "16th";
            case 17:
                return letters
                    ? "seventeenth"
                    : "17th";
            case 18:
                return letters
                    ? "eighteenth"
                    : "18th";
            case 19:
                return letters
                    ? "ninteenth"
                    : "19th";
            default:
                const stringed = floored.toString();
                const lastChar = stringed.slice(-1);
                let suffix;
                switch (lastChar) {
                    case "1":
                        suffix = "st";
                        break;
                    case "2":
                        suffix = "nd";
                        break;
                    case "3":
                        suffix = "rd";
                        break;
                    default:
                        suffix = "th";
                        break;
                }
                return `${floored}${suffix}`;
        }
    }
});
Object.defineProperty(Date.prototype, "human", {
    enumerable: false, value() {
        let d = this.getUTCDate();
        d = d < 10 ? `0${d}` : d;
        let m = this.getMonth() + 1;
        m = m < 10 ? `0${m}` : m;
        const y = this.getFullYear();
        const t = this.toTimeString().slice(0, 8).replaceAll(':', '-');
        return `${d}_${m}_${y}_${t}`;
    }
});
Object.defineProperty(Error.prototype, "toObj", {
    enumerable: false, value() {
        const where = this.stack.slice(this.stack.search(/(?<=\s)at/), this.stack.search(/(?<=at\s.*)\n/));
        const what = this.message;
        Error.captureStackTrace(this);
        const cleanstack = this.stack.split('\n')
            .filter(s => s.includes(ROOT_PATH_ABS) && !s.includes('node_modules'))
            .map(s => {
            s = s.trim();
            let frame = s.slice(s.search(ROOT_PATH_ABS), s.length - 1);
            let [file, lineno, ...rest] = frame.split(':');
            file = path.relative(ROOT_PATH_ABS, file);
            return { file, lineno };
        });
        return { what, where, cleanstack };
    }
});
const { remote } = require('electron');
const argvars = remote.process.argv.slice(2).map(s => s.toLowerCase());
const DEBUG = argvars.includes('debug');
const DRYRUN = argvars.includes('dry-run');
const NOPYTHON = argvars.includes('no-python');
const LOG = argvars.includes('log');
const path = require('path');
const fs = require('fs');
let ROOT_PATH_ABS;
let SRC_PATH_ABS;
if (path.basename(__dirname) === 'src') {
    ROOT_PATH_ABS = path.join(__dirname, '..');
    SRC_PATH_ABS = __dirname;
}
else {
    ROOT_PATH_ABS = __dirname;
    SRC_PATH_ABS = path.join(ROOT_PATH_ABS, 'src');
}
const util = require('./util');
const { default: myfs } = require('./MyFs');
const ERRORS_PATH_ABS = path.join(ROOT_PATH_ABS, 'errors');
myfs.createIfNotExists(ERRORS_PATH_ABS);
const SALAMANDER_PATH_ABS = path.join(SRC_PATH_ABS.slice(1), 'Salamander/');
const EXPERIMENTS_PATH_ABS = path.join(SRC_PATH_ABS, 'experiments');
myfs.createIfNotExists(EXPERIMENTS_PATH_ABS);
const SESSION_PATH_ABS = path.join(ERRORS_PATH_ABS, `session__${new Date().human()}`);
if (LOG) {
    myfs.createIfNotExists(SESSION_PATH_ABS);
}
const TRUTHS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'truths');
myfs.createIfNotExists(TRUTHS_PATH_ABS);
const CONFIGS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'configs');
myfs.createIfNotExists(CONFIGS_PATH_ABS);
const SUBJECTS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'subjects');
myfs.createIfNotExists(SUBJECTS_PATH_ABS);
const currentWindow = remote.getCurrentWindow();
currentWindow.on("focus", () => {
    remote.globalShortcut.register('CommandOrControl+Y', () => remote.getCurrentWindow().webContents.openDevTools());
    remote.globalShortcut.register('CommandOrControl+Q', async () => {
        const { default: MyAlert } = require('./MyAlert');
        const action = await MyAlert.big.twoButtons({ title: 'Reset finished trials count and back to New page?' });
        if (action === "second") {
            return;
        }
        require('./Glob').default.BigConfig.last_page = 'new';
        remote.getCurrentWindow().reload();
    });
});
currentWindow.on('blur', () => remote.globalShortcut.unregisterAll());
if (LOG) {
    const { default: electronlog } = require('electron-log');
    electronlog[1] = electronlog.log;
    electronlog[2] = electronlog.warn;
    electronlog[3] = electronlog.error;
    electronlog.transports.file.file = path.join(SESSION_PATH_ABS, 'log.log');
    currentWindow.webContents.on("console-message", (event, level, message, line, sourceId) => {
        if (message.includes('console.group')) {
            return;
        }
        level = { 1: 'LOG', 2: 'WARN', 3: 'ERROR' }[level];
        sourceId = path.relative(ROOT_PATH_ABS, sourceId);
        electronlog.transports.file({
            data: [`${sourceId}:${line}`, message],
            level,
        });
    });
}
console.table({
    __dirname,
    ROOT_PATH_ABS,
    SRC_PATH_ABS,
    ERRORS_PATH_ABS,
    SESSION_PATH_ABS,
    SALAMANDER_PATH_ABS,
    EXPERIMENTS_PATH_ABS,
    TRUTHS_PATH_ABS,
    CONFIGS_PATH_ABS,
    SUBJECTS_PATH_ABS,
    DEBUG,
    DRYRUN,
    NOPYTHON,
    LOG
});
console.groupEnd();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZW5kZXJlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFRQSxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBa0Q3QixNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFO0lBQzVDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLEtBQUs7UUFFRCxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtZQUM3QyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMvQixDQUFDO0NBQ0osQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRTtJQUMzQyxVQUFVLEVBQUUsS0FBSztJQUNqQixDQUFFLEtBQUssQ0FBQyxFQUFFO1FBQ04sS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUU7WUFDaEIsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FDZDtJQUNMLENBQUM7Q0FDSixDQUFFLENBQUM7QUFDSixNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFO0lBQzNDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLEtBQUs7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7Q0FDSixDQUFFLENBQUM7QUFDSixNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFO0lBQy9DLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLEtBQUs7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLElB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SyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDbEQsV0FBVyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUM7WUFDeEIsSUFBSSxFQUFFLENBQUMsR0FBRyxRQUFRLElBQUksSUFBSSxFQUFFLEVBQUUsT0FBTyxDQUFDO1lBQ3RDLEtBQUs7U0FFUixDQUFDLENBQUE7SUFFTixDQUFDLENBQUMsQ0FBQztDQUNOO0FBR0QsT0FBTyxDQUFDLEtBQUssQ0FBQztJQUNWLFNBQVM7SUFDVCxhQUFhO0lBQ2IsWUFBWTtJQUNaLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsbUJBQW1CO0lBQ25CLG9CQUFvQjtJQUNwQixlQUFlO0lBQ2YsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixLQUFLO0lBQ0wsTUFBTTtJQUNOLFFBQVE7SUFDUixHQUFHO0NBQ04sQ0FBQyxDQUFDO0FBR0gsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIHJlcXVpcmVkIGJ5IHRoZSBpbmRleC5odG1sIGZpbGUgYW5kIHdpbGxcbi8vIGJlIGV4ZWN1dGVkIGluIHRoZSByZW5kZXJlciBwcm9jZXNzIGZvciB0aGF0IHdpbmRvdy5cbi8vIE5vIE5vZGUuanMgQVBJcyBhcmUgYXZhaWxhYmxlIGluIHRoaXMgcHJvY2VzcyBiZWNhdXNlXG4vLyBgbm9kZUludGVncmF0aW9uYCBpcyB0dXJuZWQgb2ZmLiBVc2UgYHByZWxvYWQuanNgIHRvXG4vLyBzZWxlY3RpdmVseSBlbmFibGUgZmVhdHVyZXMgbmVlZGVkIGluIHRoZSByZW5kZXJpbmdcbi8vIHByb2Nlc3MuXG5cblxuY29uc29sZS5ncm91cChgcmVuZGVyZXIudHNgKTtcblxuaW50ZXJmYWNlIFN0cmluZyB7XG4gICAgZW5kc1dpdGhBbnkoLi4uYXJnczogc3RyaW5nW10pOiBib29sZWFuXG5cbiAgICBodW1hbigpOiBzdHJpbmdcblxuICAgIGlzZGlnaXQoKTogYm9vbGVhblxuXG4gICAgbG93ZXIoKTogc3RyaW5nXG5cbiAgICB1cHBlcigpOiBzdHJpbmdcblxuICAgIHJlbW92ZUFsbChyZW1vdmVWYWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgUmVnRXhwIHwgVE1hcDxzdHJpbmc+LCAuLi5yZW1vdmVWYWx1ZXM6IEFycmF5PHN0cmluZyB8IG51bWJlciB8IFJlZ0V4cCB8IFRNYXA8c3RyaW5nPj4pOiBzdHJpbmdcblxuICAgIHJlcGxhY2VBbGwoc2VhcmNoVmFsdWU6IFRNYXA8c3RyaW5nPik6IHN0cmluZ1xuXG4gICAgcmVwbGFjZUFsbChzZWFyY2hWYWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgUmVnRXhwLCByZXBsYWNlVmFsdWU6IHN0cmluZyk6IHN0cmluZ1xuXG4gICAgdGl0bGUoKTogc3RyaW5nXG5cbiAgICB1cFRvKHNlYXJjaFN0cmluZzogc3RyaW5nLCBzZWFyY2hGcm9tRW5kPzogYm9vbGVhbik6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIF9sb3dlckFsbDogVFtdO1xuXG4gICAgLyoqQWxzbyBjYWNoZXMgX2xvd2VyQWxsKi9cbiAgICBsb3dlckFsbCgpOiBUW11cblxuICAgIGNvdW50KGl0ZW06IFQpOiBudW1iZXJcblxuICAgIGNvdW50KGl0ZW06IEZ1bmN0aW9uUmV0dXJuczxib29sZWFuPik6IG51bWJlclxuXG4gICAgbGF6eShmbjogVEZ1bmN0aW9uPFQsIFQ+KTogVFtdXG59XG5cbmludGVyZmFjZSBOdW1iZXIge1xuICAgIGh1bWFuKGxldHRlcnM/OiBib29sZWFuKTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBFcnJvciB7XG4gICAgdG9PYmooKTogeyB3aGF0OiBzdHJpbmcsIHdoZXJlOiBzdHJpbmcsIGNsZWFuc3RhY2s6IHsgZmlsZTogc3RyaW5nLCBsaW5lbm86IHN0cmluZyB9W10gfVxufVxuXG5pbnRlcmZhY2UgRGF0ZSB7XG4gICAgaHVtYW4oKTogc3RyaW5nXG59XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsIFwia2V5c1wiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWUoKTogQXJyYXk8c3RyaW5nIHwgbnVtYmVyPiB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMpLm1hcChrZXkgPT4ga2V5LmlzZGlnaXQoKVxuICAgICAgICAgICAgPyBwYXJzZUludChrZXkpIDoga2V5KTtcbiAgICB9XG59KTtcbi8vICoqICBBcnJheVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgXCJsYXp5XCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAqIHZhbHVlKGZuKSB7XG4gICAgICAgIGZvciAobGV0IHggaW4gdGhpcykge1xuICAgICAgICAgICAgeWllbGQgZm4oeClcbiAgICAgICAgfVxuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwibGFzdFwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3RoaXMubGVuZ3RoIC0gMV07XG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgXCJsb3dlckFsbFwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWUoKSB7XG5cbiAgICAgICAgaWYgKCF1dGlsLmJvb2wodGhpcy5fbG93ZXJBbGwpKSB7XG4gICAgICAgICAgICB0aGlzLl9sb3dlckFsbCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgeCBvZiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG93ZXJBbGwucHVzaCh4Lmxvd2VyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9sb3dlckFsbDtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcInJzb3J0XCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydCgobiwgbSkgPT4gbiA8IG0pO1xuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwiY291bnRcIiwge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIHZhbHVlKGl0ZW06IGFueSk6IG51bWJlciB7XG4gICAgICAgIGxldCBfY291bnQgPSAwO1xuXG4gICAgICAgIGlmICh1dGlsLmlzRnVuY3Rpb24oaXRlbSkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHggb2YgdGhpcykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgZm9yIChsZXQgeCBvZiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHggPT09IGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgX2NvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb3VudDtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59LCk7XG4vLyAqKiAgU3RyaW5nXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBcImVuZHNXaXRoQW55XCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZSguLi5hcmdzOiBzdHJpbmdbXSkge1xuICAgICAgICBmb3IgKGxldCB4IG9mIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuZHNXaXRoKHgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwidXBUb1wiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWUoc2VhcmNoU3RyaW5nOiBzdHJpbmcsIHNlYXJjaEZyb21FbmQgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgICAgIGxldCBlbmQgPSBzZWFyY2hGcm9tRW5kXG4gICAgICAgICAgICA/IHRoaXMubGFzdEluZGV4T2Yoc2VhcmNoU3RyaW5nKVxuICAgICAgICAgICAgOiB0aGlzLmluZGV4T2Yoc2VhcmNoU3RyaW5nKTtcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7dGhpcy52YWx1ZU9mKCl9LnVwVG8oJHtzZWFyY2hTdHJpbmd9LCR7c2VhcmNoRnJvbUVuZH0pIGluZGV4IGlzIC0xYCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNsaWNlKDAsIGVuZCk7XG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwiaW5cIiwge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIHZhbHVlKGFycjogYW55W10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGFyci5pbmNsdWRlcyh0aGlzLnZhbHVlT2YoKSk7XG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwibG93ZXJcIiwge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIHZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwidXBwZXJcIiwge1xuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIHZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvVXBwZXJDYXNlKClcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWUoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZXMoJyAnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXQoJyAnKS5tYXAoc3RyID0+IHN0ci50aXRsZSgpKS5qb2luKCcgJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXRjaCgvW19cXC0uXS8pKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnJlcGxhY2VBbGwoL1tfXFwtLl0vLCAnICcpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wLnRpdGxlKClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbMF0udXBwZXIoKSArIHRoaXMuc2xpY2UoMSwgdGhpcy5sZW5ndGgpLmxvd2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwiaXNkaWdpdFwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTWF0aC5mbG9vcih0aGlzKSk7XG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwicmVtb3ZlQWxsXCIsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblxuICAgIHZhbHVlKHJlbW92ZVZhbHVlLCAuLi5yZW1vdmVWYWx1ZXMpIHtcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCB2YWx1ZSBvZiBbcmVtb3ZlVmFsdWUsIC4uLnJlbW92ZVZhbHVlc10pXG4gICAgICAgICAgICB0ZW1wID0gdGVtcC5yZXBsYWNlQWxsKHZhbHVlLCAnJyk7XG4gICAgICAgIHJldHVybiB0ZW1wO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwicmVwbGFjZUFsbFwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG5cbiAgICB2YWx1ZShzZWFyY2hWYWx1ZTogKHN0cmluZyB8IG51bWJlciB8IFJlZ0V4cCkgfCBUTWFwPHN0cmluZz4sIHJlcGxhY2VWYWx1ZT86IHN0cmluZykge1xuICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHNlYXJjaFZhbHVlO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3N0cmluZycgfHwgdHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgICAgICAgLnNwbGl0KHNlYXJjaFZhbHVlKVxuICAgICAgICAgICAgICAgIC5qb2luKHJlcGxhY2VWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmICgoPFJlZ0V4cD5zZWFyY2hWYWx1ZSkuY29tcGlsZSkge1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gdGhpcztcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZWQgPSB0ZW1wLnJlcGxhY2Uoc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlcGxhY2VkICE9PSB0ZW1wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSByZXBsYWNlZDtcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZWQgPSByZXBsYWNlZC5yZXBsYWNlKHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gdGhpcztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBbc3YsIHJ2XSBvZiBPYmplY3QuZW50cmllcyhzZWFyY2hWYWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSB0ZW1wLnJlcGxhY2VBbGwoc3YsIHJ2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGByZXBsYWNlQWxsIGdvdCBhIGJhZCB0eXBlLCBzZWFyY2hWYWx1ZTogJHtzZWFyY2hWYWx1ZX0sIHR5cGU6ICR7dHlwZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4vLyAqKiAgTnVtYmVyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoTnVtYmVyLnByb3RvdHlwZSwgXCJodW1hblwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWUobGV0dGVycyA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGZsb29yZWQgPSBNYXRoLmZsb29yKHRoaXMpO1xuICAgICAgICBzd2l0Y2ggKGZsb29yZWQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwiemVyb3RoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjB0aFwiO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJmaXJzdFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxc3RcIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwic2Vjb25kXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjJuZFwiO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJ0aGlyZFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIzcmRcIjtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwiZm91cnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjR0aFwiO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJmaWZ0aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCI1dGhcIjtcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwic2l4dGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiNnRoXCI7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInNldmVudGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiN3RoXCI7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcImVpZ2h0aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCI4dGhcIjtcbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwibmludGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiOXRoXCI7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJ0ZW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxMHRoXCI7XG4gICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJlbGV2ZW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxMXRoXCI7XG4gICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJ0d2VsdmV0aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxMnRoXCI7XG4gICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJ0aGlydGVlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjEzdGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcImZvdXJ0ZWVudGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiMTR0aFwiO1xuICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwiZmlmdGVlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjE1dGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInNpeHRlZW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxNnRoXCI7XG4gICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJzZXZlbnRlZW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxN3RoXCI7XG4gICAgICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJlaWdodGVlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjE4dGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcIm5pbnRlZW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxOXRoXCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ2VkID0gZmxvb3JlZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDaGFyID0gc3RyaW5nZWQuc2xpY2UoLTEpO1xuICAgICAgICAgICAgICAgIGxldCBzdWZmaXg7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChsYXN0Q2hhcikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gXCJzdFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggPSBcIm5kXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA9IFwicmRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gXCJ0aFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtmbG9vcmVkfSR7c3VmZml4fWA7XG4gICAgICAgIH1cblxuICAgIH1cbn0pO1xuLy8gKiogIERhdGVcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRlLnByb3RvdHlwZSwgXCJodW1hblwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsIHZhbHVlKCkge1xuICAgICAgICBsZXQgZCA9IHRoaXMuZ2V0VVRDRGF0ZSgpO1xuICAgICAgICBkID0gZCA8IDEwID8gYDAke2R9YCA6IGQ7XG4gICAgICAgIGxldCBtID0gdGhpcy5nZXRNb250aCgpICsgMTtcbiAgICAgICAgbSA9IG0gPCAxMCA/IGAwJHttfWAgOiBtO1xuICAgICAgICBjb25zdCB5ID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy50b1RpbWVTdHJpbmcoKS5zbGljZSgwLCA4KS5yZXBsYWNlQWxsKCc6JywgJy0nKTtcbiAgICAgICAgcmV0dXJuIGAke2R9XyR7bX1fJHt5fV8ke3R9YDtcbiAgICB9XG59KTtcbi8vICoqICBFcnJvclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEVycm9yLnByb3RvdHlwZSwgXCJ0b09ialwiLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsIHZhbHVlKCkge1xuICAgICAgICBjb25zdCB3aGVyZSA9IHRoaXMuc3RhY2suc2xpY2UodGhpcy5zdGFjay5zZWFyY2goLyg/PD1cXHMpYXQvKSwgdGhpcy5zdGFjay5zZWFyY2goLyg/PD1hdFxccy4qKVxcbi8pKTtcbiAgICAgICAgY29uc3Qgd2hhdCA9IHRoaXMubWVzc2FnZTtcbiAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyk7XG4gICAgICAgIGNvbnN0IGNsZWFuc3RhY2sgPSB0aGlzLnN0YWNrLnNwbGl0KCdcXG4nKVxuICAgICAgICAgICAgLmZpbHRlcihzID0+IHMuaW5jbHVkZXMoUk9PVF9QQVRIX0FCUykgJiYgIXMuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcycpKVxuICAgICAgICAgICAgLm1hcChzID0+IHtcbiAgICAgICAgICAgICAgICBzID0gcy50cmltKCk7XG4gICAgICAgICAgICAgICAgbGV0IGZyYW1lID0gcy5zbGljZShzLnNlYXJjaChST09UX1BBVEhfQUJTKSwgcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICBsZXQgW2ZpbGUsIGxpbmVubywgLi4ucmVzdF0gPSBmcmFtZS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIGZpbGUgPSBwYXRoLnJlbGF0aXZlKFJPT1RfUEFUSF9BQlMsIGZpbGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGZpbGUsIGxpbmVubyB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IHdoYXQsIHdoZXJlLCBjbGVhbnN0YWNrIH1cbiAgICB9XG59KTtcblxuY29uc3QgeyByZW1vdGUgfSA9IHJlcXVpcmUoJ2VsZWN0cm9uJyk7XG5jb25zdCBhcmd2YXJzID0gcmVtb3RlLnByb2Nlc3MuYXJndi5zbGljZSgyKS5tYXAocyA9PiBzLnRvTG93ZXJDYXNlKCkpO1xuY29uc3QgREVCVUcgPSBhcmd2YXJzLmluY2x1ZGVzKCdkZWJ1ZycpO1xuY29uc3QgRFJZUlVOID0gYXJndmFycy5pbmNsdWRlcygnZHJ5LXJ1bicpO1xuY29uc3QgTk9QWVRIT04gPSBhcmd2YXJzLmluY2x1ZGVzKCduby1weXRob24nKTtcblxuY29uc3QgTE9HID0gYXJndmFycy5pbmNsdWRlcygnbG9nJyk7XG4vLyBAdHMtaWdub3JlXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xubGV0IFJPT1RfUEFUSF9BQlM6IHN0cmluZztcbmxldCBTUkNfUEFUSF9BQlM6IHN0cmluZztcbmlmIChwYXRoLmJhc2VuYW1lKF9fZGlybmFtZSkgPT09ICdzcmMnKSB7XG4gICAgUk9PVF9QQVRIX0FCUyA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicpO1xuICAgIFNSQ19QQVRIX0FCUyA9IF9fZGlybmFtZTtcbn0gZWxzZSB7XG4gICAgUk9PVF9QQVRIX0FCUyA9IF9fZGlybmFtZTtcbiAgICBTUkNfUEFUSF9BQlMgPSBwYXRoLmpvaW4oUk9PVF9QQVRIX0FCUywgJ3NyYycpO1xufVxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuY29uc3QgeyBkZWZhdWx0OiBteWZzIH0gPSByZXF1aXJlKCcuL015RnMnKTtcbmNvbnN0IEVSUk9SU19QQVRIX0FCUyA9IHBhdGguam9pbihST09UX1BBVEhfQUJTLCAnZXJyb3JzJyk7XG5teWZzLmNyZWF0ZUlmTm90RXhpc3RzKEVSUk9SU19QQVRIX0FCUyk7XG4vLyAvc3JjL3RlbXBsYXRlc1xuLy8gY29uc3QgVEVNUExBVEVTX1BBVEhfQUJTID0gcGF0aC5qb2luKFJPT1RfUEFUSF9BQlMsICd0ZW1wbGF0ZXMnKTtcbi8vIC9zcmMvU2FsYW1hbmRlclxuLy8gVE9ETzogVEVTVCBPTiBXSU5ET1dTXG5jb25zdCBTQUxBTUFOREVSX1BBVEhfQUJTID0gcGF0aC5qb2luKFNSQ19QQVRIX0FCUy5zbGljZSgxKSwgJ1NhbGFtYW5kZXIvJyk7XG5cbi8vIC9zcmMvZXhwZXJpbWVudHNcbmNvbnN0IEVYUEVSSU1FTlRTX1BBVEhfQUJTID0gcGF0aC5qb2luKFNSQ19QQVRIX0FCUywgJ2V4cGVyaW1lbnRzJyk7XG5teWZzLmNyZWF0ZUlmTm90RXhpc3RzKEVYUEVSSU1FTlRTX1BBVEhfQUJTKTtcbmNvbnN0IFNFU1NJT05fUEFUSF9BQlMgPSBwYXRoLmpvaW4oRVJST1JTX1BBVEhfQUJTLCBgc2Vzc2lvbl9fJHtuZXcgRGF0ZSgpLmh1bWFuKCl9YCk7XG5pZiAoTE9HKSB7XG4gICAgbXlmcy5jcmVhdGVJZk5vdEV4aXN0cyhTRVNTSU9OX1BBVEhfQUJTKTtcbn1cblxuLy8gL3NyYy9leHBlcmltZW50cy90cnV0aHNcbmNvbnN0IFRSVVRIU19QQVRIX0FCUyA9IHBhdGguam9pbihFWFBFUklNRU5UU19QQVRIX0FCUywgJ3RydXRocycpO1xubXlmcy5jcmVhdGVJZk5vdEV4aXN0cyhUUlVUSFNfUEFUSF9BQlMpO1xuLy8gL3NyYy9leHBlcmltZW50cy9jb25maWdzXG5jb25zdCBDT05GSUdTX1BBVEhfQUJTID0gcGF0aC5qb2luKEVYUEVSSU1FTlRTX1BBVEhfQUJTLCAnY29uZmlncycpO1xubXlmcy5jcmVhdGVJZk5vdEV4aXN0cyhDT05GSUdTX1BBVEhfQUJTKTtcbi8vIC9zcmMvZXhwZXJpbWVudHMvc3ViamVjdHNcbmNvbnN0IFNVQkpFQ1RTX1BBVEhfQUJTID0gcGF0aC5qb2luKEVYUEVSSU1FTlRTX1BBVEhfQUJTLCAnc3ViamVjdHMnKTtcbm15ZnMuY3JlYXRlSWZOb3RFeGlzdHMoU1VCSkVDVFNfUEFUSF9BQlMpO1xuXG5jb25zdCBjdXJyZW50V2luZG93ID0gcmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKTtcbmN1cnJlbnRXaW5kb3cub24oXCJmb2N1c1wiLCAoKSA9PiB7XG5cbiAgICByZW1vdGUuZ2xvYmFsU2hvcnRjdXQucmVnaXN0ZXIoJ0NvbW1hbmRPckNvbnRyb2wrWScsICgpID0+IHJlbW90ZS5nZXRDdXJyZW50V2luZG93KCkud2ViQ29udGVudHMub3BlbkRldlRvb2xzKCkpO1xuICAgIHJlbW90ZS5nbG9iYWxTaG9ydGN1dC5yZWdpc3RlcignQ29tbWFuZE9yQ29udHJvbCtRJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGRlZmF1bHQ6IE15QWxlcnQgfSA9IHJlcXVpcmUoJy4vTXlBbGVydCcpO1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBhd2FpdCBNeUFsZXJ0LmJpZy50d29CdXR0b25zKHsgdGl0bGU6ICdSZXNldCBmaW5pc2hlZCB0cmlhbHMgY291bnQgYW5kIGJhY2sgdG8gTmV3IHBhZ2U/JyB9KTtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJzZWNvbmRcIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlcXVpcmUoJy4vR2xvYicpLmRlZmF1bHQuQmlnQ29uZmlnLmxhc3RfcGFnZSA9ICduZXcnO1xuICAgICAgICByZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpLnJlbG9hZCgpO1xuICAgIH0pO1xufSk7XG5jdXJyZW50V2luZG93Lm9uKCdibHVyJywgKCkgPT4gcmVtb3RlLmdsb2JhbFNob3J0Y3V0LnVucmVnaXN0ZXJBbGwoKSk7XG5pZiAoTE9HKSB7XG4gICAgY29uc3QgeyBkZWZhdWx0OiBlbGVjdHJvbmxvZyB9ID0gcmVxdWlyZSgnZWxlY3Ryb24tbG9nJyk7XG4gICAgZWxlY3Ryb25sb2dbMV0gPSBlbGVjdHJvbmxvZy5sb2c7XG4gICAgZWxlY3Ryb25sb2dbMl0gPSBlbGVjdHJvbmxvZy53YXJuO1xuICAgIGVsZWN0cm9ubG9nWzNdID0gZWxlY3Ryb25sb2cuZXJyb3I7XG4gICAgZWxlY3Ryb25sb2cudHJhbnNwb3J0cy5maWxlLmZpbGUgPSBwYXRoLmpvaW4oU0VTU0lPTl9QQVRIX0FCUywgJ2xvZy5sb2cnKTtcblxuICAgIGN1cnJlbnRXaW5kb3cud2ViQ29udGVudHMub24oXCJjb25zb2xlLW1lc3NhZ2VcIiwgKGV2ZW50LCBsZXZlbCwgbWVzc2FnZSwgbGluZSwgc291cmNlSWQpID0+IHtcbiAgICAgICAgLy9UT0RPOiBzYXZlIHRvIG1lbW9yeSwgd3JpdGUgdG8gZmlsZSBvbiBleGl0XG4gICAgICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdjb25zb2xlLmdyb3VwJykpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGxldmVsID0geyAxOiAnTE9HJywgMjogJ1dBUk4nLCAzOiAnRVJST1InIH1bbGV2ZWxdO1xuICAgICAgICBzb3VyY2VJZCA9IHBhdGgucmVsYXRpdmUoUk9PVF9QQVRIX0FCUywgc291cmNlSWQpO1xuICAgICAgICBlbGVjdHJvbmxvZy50cmFuc3BvcnRzLmZpbGUoe1xuICAgICAgICAgICAgZGF0YTogW2Ake3NvdXJjZUlkfToke2xpbmV9YCwgbWVzc2FnZV0sXG4gICAgICAgICAgICBsZXZlbCxcblxuICAgICAgICB9KVxuXG4gICAgfSk7XG59XG5cblxuY29uc29sZS50YWJsZSh7XG4gICAgX19kaXJuYW1lLFxuICAgIFJPT1RfUEFUSF9BQlMsXG4gICAgU1JDX1BBVEhfQUJTLFxuICAgIEVSUk9SU19QQVRIX0FCUyxcbiAgICBTRVNTSU9OX1BBVEhfQUJTLFxuICAgIFNBTEFNQU5ERVJfUEFUSF9BQlMsXG4gICAgRVhQRVJJTUVOVFNfUEFUSF9BQlMsXG4gICAgVFJVVEhTX1BBVEhfQUJTLFxuICAgIENPTkZJR1NfUEFUSF9BQlMsXG4gICAgU1VCSkVDVFNfUEFUSF9BQlMsXG4gICAgREVCVUcsXG4gICAgRFJZUlVOLFxuICAgIE5PUFlUSE9OLFxuICAgIExPR1xufSk7XG5cblxuY29uc29sZS5ncm91cEVuZCgpO1xuIl19