console.group(`renderer.ts`);
Object.defineProperty(Object.prototype, "keys", {
    enumerable: false,
    value() {
        return Object.keys(this).map(key => key.isdigit()
            ? parseInt(key) : key);
    }
});
Object.defineProperty(Array.prototype, "lazy", {
    enumerable: false,
    *value(fn) {
        for (let x in this) {
            yield fn(x);
        }
    }
});
Object.defineProperty(Array.prototype, "last", {
    enumerable: false,
    value() {
        return this[this.length - 1];
    }
});
Object.defineProperty(Array.prototype, "lowerAll", {
    enumerable: false,
    value() {
        if (!util.bool(this._lowerAll)) {
            this._lowerAll = [];
            for (let x of this) {
                this._lowerAll.push(x.lower());
            }
        }
        return this._lowerAll;
    }
});
Object.defineProperty(Array.prototype, "rsort", {
    enumerable: false,
    value() {
        return this.sort((n, m) => n < m);
    }
});
Object.defineProperty(Array.prototype, "count", {
    enumerable: false,
    value(item) {
        let _count = 0;
        if (util.isFunction(item)) {
            for (let x of this) {
                if (item(x)) {
                    _count++;
                }
            }
        }
        else {
            for (let x of this) {
                if (x === item) {
                    _count++;
                }
            }
            return _count;
        }
    }
});
Object.defineProperty(String.prototype, "endsWithAny", {
    enumerable: false,
    value(...args) {
        for (let x of args) {
            if (this.endsWith(x)) {
                return true;
            }
        }
        return false;
    }
});
Object.defineProperty(String.prototype, "upTo", {
    enumerable: false,
    value(searchString, searchFromEnd = false) {
        let end = searchFromEnd
            ? this.lastIndexOf(searchString)
            : this.indexOf(searchString);
        if (end === -1)
            console.warn(`${this.valueOf()}.upTo(${searchString},${searchFromEnd}) index is -1`);
        return this.slice(0, end);
    }
});
Object.defineProperty(String.prototype, "in", {
    enumerable: false,
    value(arr) {
        return arr.includes(this.valueOf());
    }
});
Object.defineProperty(String.prototype, "lower", {
    enumerable: false,
    value() {
        return this.toLowerCase();
    }
});
Object.defineProperty(String.prototype, "upper", {
    enumerable: false,
    value() {
        return this.toUpperCase();
    }
});
Object.defineProperty(String.prototype, "title", {
    enumerable: false,
    value() {
        if (this.includes(' ')) {
            return this.split(' ').map(str => str.title()).join(' ');
        }
        else {
            if (this.match(/[_\-.]/)) {
                let temp = this.replaceAll(/[_\-.]/, ' ');
                return temp.title();
            }
            else {
                return this[0].upper() + this.slice(1, this.length).lower();
            }
        }
    }
});
Object.defineProperty(String.prototype, "isdigit", {
    enumerable: false,
    value() {
        return !isNaN(Math.floor(this));
    }
});
Object.defineProperty(String.prototype, "removeAll", {
    enumerable: false,
    value(removeValue, ...removeValues) {
        let temp = this;
        for (let value of [removeValue, ...removeValues])
            temp = temp.replaceAll(value, '');
        return temp;
    }
});
Object.defineProperty(String.prototype, "replaceAll", {
    enumerable: false,
    value(searchValue, replaceValue) {
        const type = typeof searchValue;
        if (type === 'string' || type === 'number') {
            return this
                .split(searchValue)
                .join(replaceValue);
        }
        else if (type === 'object') {
            if (searchValue.compile) {
                let temp = this;
                let replaced = temp.replace(searchValue, replaceValue);
                while (replaced !== temp) {
                    temp = replaced;
                    replaced = replaced.replace(searchValue, replaceValue);
                }
                return replaced;
            }
            else {
                let temp = this;
                for (let [sv, rv] of Object.entries(searchValue))
                    temp = temp.replaceAll(sv, rv);
                return temp;
            }
        }
        else {
            console.warn(`replaceAll got a bad type, searchValue: ${searchValue}, type: ${type}`);
            return this;
        }
    }
});
Object.defineProperty(Number.prototype, "human", {
    enumerable: false,
    value(letters = false) {
        const floored = Math.floor(this);
        switch (floored) {
            case 0:
                return letters
                    ? "zeroth"
                    : "0th";
            case 1:
                return letters
                    ? "first"
                    : "1st";
            case 2:
                return letters
                    ? "second"
                    : "2nd";
            case 3:
                return letters
                    ? "third"
                    : "3rd";
            case 4:
                return letters
                    ? "fourth"
                    : "4th";
            case 5:
                return letters
                    ? "fifth"
                    : "5th";
            case 6:
                return letters
                    ? "sixth"
                    : "6th";
            case 7:
                return letters
                    ? "seventh"
                    : "7th";
            case 8:
                return letters
                    ? "eighth"
                    : "8th";
            case 9:
                return letters
                    ? "ninth"
                    : "9th";
            case 10:
                return letters
                    ? "tenth"
                    : "10th";
            case 11:
                return letters
                    ? "eleventh"
                    : "11th";
            case 12:
                return letters
                    ? "twelveth"
                    : "12th";
            case 13:
                return letters
                    ? "thirteenth"
                    : "13th";
            case 14:
                return letters
                    ? "fourteenth"
                    : "14th";
            case 15:
                return letters
                    ? "fifteenth"
                    : "15th";
            case 16:
                return letters
                    ? "sixteenth"
                    : "16th";
            case 17:
                return letters
                    ? "seventeenth"
                    : "17th";
            case 18:
                return letters
                    ? "eighteenth"
                    : "18th";
            case 19:
                return letters
                    ? "ninteenth"
                    : "19th";
            default:
                const stringed = floored.toString();
                const lastChar = stringed.slice(-1);
                let suffix;
                switch (lastChar) {
                    case "1":
                        suffix = "st";
                        break;
                    case "2":
                        suffix = "nd";
                        break;
                    case "3":
                        suffix = "rd";
                        break;
                    default:
                        suffix = "th";
                        break;
                }
                return `${floored}${suffix}`;
        }
    }
});
Object.defineProperty(Date.prototype, "human", {
    enumerable: false, value() {
        let d = this.getUTCDate();
        d = d < 10 ? `0${d}` : d;
        let m = this.getMonth() + 1;
        m = m < 10 ? `0${m}` : m;
        const y = this.getFullYear();
        const t = this.toTimeString().slice(0, 8).replaceAll(':', '-');
        return `${d}_${m}_${y}_${t}`;
    }
});
Object.defineProperty(Error.prototype, "toObj", {
    enumerable: false, value() {
        const where = this.stack.slice(this.stack.search(/(?<=\s)at/), this.stack.search(/(?<=at\s.*)\n/));
        const what = this.message;
        return { what, where };
    }
});
const { remote } = require('electron');
const argvars = remote.process.argv.slice(2).map(s => s.toLowerCase());
const DEBUG = argvars.includes('debug');
const DRYRUN = argvars.includes('dry-run');
const NOPYTHON = argvars.includes('no-python');
const path = require('path');
const fs = require('fs');
let ROOT_PATH_ABS;
let SRC_PATH_ABS;
if (path.basename(__dirname) === 'src') {
    ROOT_PATH_ABS = path.join(__dirname, '..');
    SRC_PATH_ABS = __dirname;
}
else {
    ROOT_PATH_ABS = __dirname;
    SRC_PATH_ABS = path.join(ROOT_PATH_ABS, 'src');
}
const util = require('./util');
const { default: myfs } = require('./MyFs');
const ERRORS_PATH_ABS = path.join(ROOT_PATH_ABS, 'errors');
myfs.createIfNotExists(ERRORS_PATH_ABS);
const SALAMANDER_PATH_ABS = path.join(SRC_PATH_ABS.slice(1), 'Salamander/');
const EXPERIMENTS_PATH_ABS = path.join(SRC_PATH_ABS, 'experiments');
myfs.createIfNotExists(EXPERIMENTS_PATH_ABS);
const SESSION_PATH_ABS = path.join(ERRORS_PATH_ABS, `session__${new Date().human()}`);
if (DEBUG) {
    myfs.createIfNotExists(SESSION_PATH_ABS);
}
const TRUTHS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'truths');
myfs.createIfNotExists(TRUTHS_PATH_ABS);
const CONFIGS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'configs');
myfs.createIfNotExists(CONFIGS_PATH_ABS);
const SUBJECTS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'subjects');
myfs.createIfNotExists(SUBJECTS_PATH_ABS);
const currentWindow = remote.getCurrentWindow();
currentWindow.on("focus", () => {
    remote.globalShortcut.register('CommandOrControl+Y', () => remote.getCurrentWindow().webContents.openDevTools());
    remote.globalShortcut.register('CommandOrControl+Q', async () => {
        const { default: MyAlert } = require('./MyAlert');
        console.log('ctrl+q', MyAlert);
        const action = await MyAlert.big.twoButtons('Reset finished trials count and back to New page?');
        if (action === "cancel") {
            return;
        }
        require('./Glob').default.BigConfig.last_page = 'new';
        remote.getCurrentWindow().reload();
    });
});
currentWindow.on('blur', () => remote.globalShortcut.unregisterAll());
if (DEBUG) {
    const { default: log } = require('electron-log');
    log[1] = log.log;
    log[2] = log.warn;
    log[3] = log.error;
    log.transports.file.file = path.join(SESSION_PATH_ABS, 'log.log');
    currentWindow.webContents.on("console-message", (event, level, message, line, sourceId) => {
        if (level >= 3) {
            level = { 1: 'LOG', 2: 'WARN', 3: 'ERROR' }[level];
            sourceId = path.relative(ROOT_PATH_ABS, sourceId);
            log.transports.file({
                data: [`${sourceId}:${line}`, message],
                level,
            });
        }
    });
}
console.table({
    __dirname,
    ROOT_PATH_ABS,
    SRC_PATH_ABS,
    ERRORS_PATH_ABS,
    SALAMANDER_PATH_ABS,
    EXPERIMENTS_PATH_ABS,
    TRUTHS_PATH_ABS,
    CONFIGS_PATH_ABS,
    SUBJECTS_PATH_ABS,
    DEBUG, DRYRUN, NOPYTHON
});
console.groupEnd();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZW5kZXJlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFRQSxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBa0Q3QixNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFO0lBQzVDLFVBQVUsRUFBRyxLQUFLO0lBQ2xCLEtBQUs7UUFFRCxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRTtZQUM3QyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMvQixDQUFDO0NBQ0osQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRTtJQUMzQyxVQUFVLEVBQUcsS0FBSztJQUNsQixDQUFFLEtBQUssQ0FBQyxFQUFFO1FBQ04sS0FBTSxJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUc7WUFDbEIsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7U0FDZDtJQUNMLENBQUM7Q0FDSixDQUFFLENBQUM7QUFDSixNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFO0lBQzNDLFVBQVUsRUFBRyxLQUFLO0lBQ2xCLEtBQUs7UUFDRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7Q0FDSixDQUFFLENBQUM7QUFDSixNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFO0lBQy9DLFVBQVUsRUFBRyxLQUFLO0lBQ2xCLEtBQUs7UUFFRCxJQUFLLENBQUMsSUFBSSxDQUFDLElB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QyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBbUJsRSxhQUFhLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRTtRQUN0RixJQUFLLEtBQUssSUFBSSxDQUFDLEVBQUc7WUFDZCxLQUFLLEdBQUcsRUFBRSxDQUFDLEVBQUcsS0FBSyxFQUFFLENBQUMsRUFBRyxNQUFNLEVBQUUsQ0FBQyxFQUFHLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RELFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUNsRCxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQztnQkFDaEIsSUFBSSxFQUFHLENBQUUsR0FBRyxRQUFRLElBQUksSUFBSSxFQUFFLEVBQUUsT0FBTyxDQUFFO2dCQUN6QyxLQUFLO2FBRVIsQ0FBQyxDQUFBO1NBQ0w7SUFDTCxDQUFDLENBQUMsQ0FBQztDQUNOO0FBR0QsT0FBTyxDQUFDLEtBQUssQ0FBQztJQUNWLFNBQVM7SUFDVCxhQUFhO0lBQ2IsWUFBWTtJQUNaLGVBQWU7SUFDZixtQkFBbUI7SUFDbkIsb0JBQW9CO0lBQ3BCLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsaUJBQWlCO0lBQ2pCLEtBQUssRUFBRSxNQUFNLEVBQUUsUUFBUTtDQUMxQixDQUFDLENBQUM7QUFHSCxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgcmVxdWlyZWQgYnkgdGhlIGluZGV4Lmh0bWwgZmlsZSBhbmQgd2lsbFxuLy8gYmUgZXhlY3V0ZWQgaW4gdGhlIHJlbmRlcmVyIHByb2Nlc3MgZm9yIHRoYXQgd2luZG93LlxuLy8gTm8gTm9kZS5qcyBBUElzIGFyZSBhdmFpbGFibGUgaW4gdGhpcyBwcm9jZXNzIGJlY2F1c2Vcbi8vIGBub2RlSW50ZWdyYXRpb25gIGlzIHR1cm5lZCBvZmYuIFVzZSBgcHJlbG9hZC5qc2AgdG9cbi8vIHNlbGVjdGl2ZWx5IGVuYWJsZSBmZWF0dXJlcyBuZWVkZWQgaW4gdGhlIHJlbmRlcmluZ1xuLy8gcHJvY2Vzcy5cblxuXG5jb25zb2xlLmdyb3VwKGByZW5kZXJlci50c2ApO1xuXG5pbnRlcmZhY2UgU3RyaW5nIHtcbiAgICBlbmRzV2l0aEFueSguLi5hcmdzOiBzdHJpbmdbXSk6IGJvb2xlYW5cbiAgICBcbiAgICBodW1hbigpOiBzdHJpbmdcbiAgICBcbiAgICBpc2RpZ2l0KCk6IGJvb2xlYW5cbiAgICBcbiAgICBsb3dlcigpOiBzdHJpbmdcbiAgICBcbiAgICB1cHBlcigpOiBzdHJpbmdcbiAgICBcbiAgICByZW1vdmVBbGwocmVtb3ZlVmFsdWU6IHN0cmluZyB8IG51bWJlciB8IFJlZ0V4cCB8IFRNYXA8c3RyaW5nPiwgLi4ucmVtb3ZlVmFsdWVzOiBBcnJheTxzdHJpbmcgfCBudW1iZXIgfCBSZWdFeHAgfCBUTWFwPHN0cmluZz4+KTogc3RyaW5nXG4gICAgXG4gICAgcmVwbGFjZUFsbChzZWFyY2hWYWx1ZTogVE1hcDxzdHJpbmc+KTogc3RyaW5nXG4gICAgXG4gICAgcmVwbGFjZUFsbChzZWFyY2hWYWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgUmVnRXhwLCByZXBsYWNlVmFsdWU6IHN0cmluZyk6IHN0cmluZ1xuICAgIFxuICAgIHRpdGxlKCk6IHN0cmluZ1xuICAgIFxuICAgIHVwVG8oc2VhcmNoU3RyaW5nOiBzdHJpbmcsIHNlYXJjaEZyb21FbmQ/OiBib29sZWFuKTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gICAgX2xvd2VyQWxsOiBUW107XG4gICAgXG4gICAgLyoqQWxzbyBjYWNoZXMgX2xvd2VyQWxsKi9cbiAgICBsb3dlckFsbCgpOiBUW11cbiAgICBcbiAgICBjb3VudChpdGVtOiBUKTogbnVtYmVyXG4gICAgXG4gICAgY291bnQoaXRlbTogRnVuY3Rpb25SZXR1cm5zPGJvb2xlYW4+KTogbnVtYmVyXG4gICAgXG4gICAgbGF6eShmbjogVEZ1bmN0aW9uPFQsIFQ+KTogVFtdXG59XG5cbmludGVyZmFjZSBOdW1iZXIge1xuICAgIGh1bWFuKGxldHRlcnM/OiBib29sZWFuKTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBFcnJvciB7XG4gICAgdG9PYmooKTogeyB3aGF0OiBzdHJpbmcsIHdoZXJlOiBzdHJpbmcgfVxufVxuXG5pbnRlcmZhY2UgRGF0ZSB7XG4gICAgaHVtYW4oKTogc3RyaW5nXG59XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsIFwia2V5c1wiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKCk6IEFycmF5PHN0cmluZyB8IG51bWJlcj4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzKS5tYXAoa2V5ID0+IGtleS5pc2RpZ2l0KClcbiAgICAgICAgICAgID8gcGFyc2VJbnQoa2V5KSA6IGtleSk7XG4gICAgfVxufSk7XG4vLyAqKiAgQXJyYXlcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwibGF6eVwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgICogdmFsdWUoZm4pIHtcbiAgICAgICAgZm9yICggbGV0IHggaW4gdGhpcyApIHtcbiAgICAgICAgICAgIHlpZWxkIGZuKHgpXG4gICAgICAgIH1cbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcImxhc3RcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdGhpcy5sZW5ndGggLSAxXTtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcImxvd2VyQWxsXCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgdmFsdWUoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoICF1dGlsLmJvb2wodGhpcy5fbG93ZXJBbGwpICkge1xuICAgICAgICAgICAgdGhpcy5fbG93ZXJBbGwgPSBbXTtcbiAgICAgICAgICAgIGZvciAoIGxldCB4IG9mIHRoaXMgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG93ZXJBbGwucHVzaCh4Lmxvd2VyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9sb3dlckFsbDtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcInJzb3J0XCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnQoKG4sIG0pID0+IG4gPCBtKTtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcImNvdW50XCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgdmFsdWUoaXRlbTogYW55KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IF9jb3VudCA9IDA7XG4gICAgICAgIFxuICAgICAgICBpZiAoIHV0aWwuaXNGdW5jdGlvbihpdGVtKSApIHtcbiAgICAgICAgICAgIGZvciAoIGxldCB4IG9mIHRoaXMgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBpdGVtKHgpICkge1xuICAgICAgICAgICAgICAgICAgICBfY291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoIGxldCB4IG9mIHRoaXMgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCB4ID09PSBpdGVtICkge1xuICAgICAgICAgICAgICAgICAgICBfY291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvdW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn0sKTtcbi8vICoqICBTdHJpbmdcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwiZW5kc1dpdGhBbnlcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZSguLi5hcmdzOiBzdHJpbmdbXSkge1xuICAgICAgICBmb3IgKCBsZXQgeCBvZiBhcmdzICkge1xuICAgICAgICAgICAgaWYgKCB0aGlzLmVuZHNXaXRoKHgpICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgXG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwidXBUb1wiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKHNlYXJjaFN0cmluZzogc3RyaW5nLCBzZWFyY2hGcm9tRW5kID0gZmFsc2UpOiBzdHJpbmcge1xuICAgICAgICBsZXQgZW5kID0gc2VhcmNoRnJvbUVuZFxuICAgICAgICAgICAgPyB0aGlzLmxhc3RJbmRleE9mKHNlYXJjaFN0cmluZylcbiAgICAgICAgICAgIDogdGhpcy5pbmRleE9mKHNlYXJjaFN0cmluZyk7XG4gICAgICAgIGlmICggZW5kID09PSAtMSApXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7dGhpcy52YWx1ZU9mKCl9LnVwVG8oJHtzZWFyY2hTdHJpbmd9LCR7c2VhcmNoRnJvbUVuZH0pIGluZGV4IGlzIC0xYCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNsaWNlKDAsIGVuZCk7XG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwiaW5cIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZShhcnI6IGFueVtdKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBhcnIuaW5jbHVkZXModGhpcy52YWx1ZU9mKCkpO1xuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBcImxvd2VyXCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgdmFsdWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9Mb3dlckNhc2UoKTtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJ1cHBlclwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvVXBwZXJDYXNlKClcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICggdGhpcy5pbmNsdWRlcygnICcpICkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXQoJyAnKS5tYXAoc3RyID0+IHN0ci50aXRsZSgpKS5qb2luKCcgJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIHRoaXMubWF0Y2goL1tfXFwtLl0vKSApIHtcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IHRoaXMucmVwbGFjZUFsbCgvW19cXC0uXS8sICcgJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRlbXAudGl0bGUoKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1swXS51cHBlcigpICsgdGhpcy5zbGljZSgxLCB0aGlzLmxlbmd0aCkubG93ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwiaXNkaWdpdFwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE1hdGguZmxvb3IodGhpcykpO1xuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBcInJlbW92ZUFsbFwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIFxuICAgIHZhbHVlKHJlbW92ZVZhbHVlLCAuLi5yZW1vdmVWYWx1ZXMpIHtcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzO1xuICAgICAgICBmb3IgKCBsZXQgdmFsdWUgb2YgWyByZW1vdmVWYWx1ZSwgLi4ucmVtb3ZlVmFsdWVzIF0gKVxuICAgICAgICAgICAgdGVtcCA9IHRlbXAucmVwbGFjZUFsbCh2YWx1ZSwgJycpO1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBcInJlcGxhY2VBbGxcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICBcbiAgICB2YWx1ZShzZWFyY2hWYWx1ZTogKHN0cmluZyB8IG51bWJlciB8IFJlZ0V4cCkgfCBUTWFwPHN0cmluZz4sIHJlcGxhY2VWYWx1ZT86IHN0cmluZykge1xuICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHNlYXJjaFZhbHVlO1xuICAgICAgICBpZiAoIHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInICkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICAgICAgICAuc3BsaXQoc2VhcmNoVmFsdWUpXG4gICAgICAgICAgICAgICAgLmpvaW4ocmVwbGFjZVZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PT0gJ29iamVjdCcgKSB7XG4gICAgICAgICAgICBpZiAoICg8UmVnRXhwPiBzZWFyY2hWYWx1ZSkuY29tcGlsZSApIHtcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgbGV0IHJlcGxhY2VkID0gdGVtcC5yZXBsYWNlKHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHdoaWxlICggcmVwbGFjZWQgIT09IHRlbXAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSByZXBsYWNlZDtcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZWQgPSByZXBsYWNlZC5yZXBsYWNlKHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wID0gdGhpcztcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgWyBzdiwgcnYgXSBvZiBPYmplY3QuZW50cmllcyhzZWFyY2hWYWx1ZSkgKVxuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gdGVtcC5yZXBsYWNlQWxsKHN2LCBydik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHJlcGxhY2VBbGwgZ290IGEgYmFkIHR5cGUsIHNlYXJjaFZhbHVlOiAke3NlYXJjaFZhbHVlfSwgdHlwZTogJHt0eXBlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbi8vICoqICBOdW1iZXJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShOdW1iZXIucHJvdG90eXBlLCBcImh1bWFuXCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgdmFsdWUobGV0dGVycyA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGZsb29yZWQgPSBNYXRoLmZsb29yKHRoaXMpO1xuICAgICAgICBzd2l0Y2ggKCBmbG9vcmVkICkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJ6ZXJvdGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiMHRoXCI7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcImZpcnN0XCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjFzdFwiO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJzZWNvbmRcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiMm5kXCI7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInRoaXJkXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjNyZFwiO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJmb3VydGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiNHRoXCI7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcImZpZnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjV0aFwiO1xuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJzaXh0aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCI2dGhcIjtcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwic2V2ZW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCI3dGhcIjtcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwiZWlnaHRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjh0aFwiO1xuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJuaW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCI5dGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInRlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjEwdGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcImVsZXZlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjExdGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInR3ZWx2ZXRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjEydGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInRoaXJ0ZWVudGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiMTN0aFwiO1xuICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwiZm91cnRlZW50aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxNHRoXCI7XG4gICAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJmaWZ0ZWVudGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiMTV0aFwiO1xuICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwic2l4dGVlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjE2dGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInNldmVudGVlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjE3dGhcIjtcbiAgICAgICAgICAgIGNhc2UgMTg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcImVpZ2h0ZWVudGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiMTh0aFwiO1xuICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwibmludGVlbnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjE5dGhcIjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nZWQgPSBmbG9vcmVkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdENoYXIgPSBzdHJpbmdlZC5zbGljZSgtMSk7XG4gICAgICAgICAgICAgICAgbGV0IHN1ZmZpeDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBsYXN0Q2hhciApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA9IFwic3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gXCJuZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggPSBcInJkXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA9IFwidGhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Zmxvb3JlZH0ke3N1ZmZpeH1gO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbn0pO1xuLy8gKiogIERhdGVcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRlLnByb3RvdHlwZSwgXCJodW1hblwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLCB2YWx1ZSgpIHtcbiAgICAgICAgbGV0IGQgPSB0aGlzLmdldFVUQ0RhdGUoKTtcbiAgICAgICAgZCA9IGQgPCAxMCA/IGAwJHtkfWAgOiBkO1xuICAgICAgICBsZXQgbSA9IHRoaXMuZ2V0TW9udGgoKSArIDE7XG4gICAgICAgIG0gPSBtIDwgMTAgPyBgMCR7bX1gIDogbTtcbiAgICAgICAgY29uc3QgeSA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudG9UaW1lU3RyaW5nKCkuc2xpY2UoMCwgOCkucmVwbGFjZUFsbCgnOicsICctJyk7XG4gICAgICAgIHJldHVybiBgJHtkfV8ke219XyR7eX1fJHt0fWA7XG4gICAgfVxufSk7XG4vLyAqKiAgRXJyb3Jcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFcnJvci5wcm90b3R5cGUsIFwidG9PYmpcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSwgdmFsdWUoKSB7XG4gICAgICAgIGNvbnN0IHdoZXJlID0gdGhpcy5zdGFjay5zbGljZSh0aGlzLnN0YWNrLnNlYXJjaCgvKD88PVxccylhdC8pLCB0aGlzLnN0YWNrLnNlYXJjaCgvKD88PWF0XFxzLiopXFxuLykpO1xuICAgICAgICBjb25zdCB3aGF0ID0gdGhpcy5tZXNzYWdlO1xuICAgICAgICByZXR1cm4geyB3aGF0LCB3aGVyZSB9XG4gICAgfVxufSk7XG5cbmNvbnN0IHsgcmVtb3RlIH0gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xuY29uc3QgYXJndmFycyA9IHJlbW90ZS5wcm9jZXNzLmFyZ3Yuc2xpY2UoMikubWFwKHMgPT4gcy50b0xvd2VyQ2FzZSgpKTtcbmNvbnN0IERFQlVHID0gYXJndmFycy5pbmNsdWRlcygnZGVidWcnKTtcbmNvbnN0IERSWVJVTiA9IGFyZ3ZhcnMuaW5jbHVkZXMoJ2RyeS1ydW4nKTtcbmNvbnN0IE5PUFlUSE9OID0gYXJndmFycy5pbmNsdWRlcygnbm8tcHl0aG9uJyk7XG4vLyBAdHMtaWdub3JlXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xubGV0IFJPT1RfUEFUSF9BQlM6IHN0cmluZztcbmxldCBTUkNfUEFUSF9BQlM6IHN0cmluZztcbmlmICggcGF0aC5iYXNlbmFtZShfX2Rpcm5hbWUpID09PSAnc3JjJyApIHtcbiAgICBST09UX1BBVEhfQUJTID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJyk7XG4gICAgU1JDX1BBVEhfQUJTID0gX19kaXJuYW1lO1xufSBlbHNlIHtcbiAgICBST09UX1BBVEhfQUJTID0gX19kaXJuYW1lO1xuICAgIFNSQ19QQVRIX0FCUyA9IHBhdGguam9pbihST09UX1BBVEhfQUJTLCAnc3JjJyk7XG59XG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCB7IGRlZmF1bHQgOiBteWZzIH0gPSByZXF1aXJlKCcuL015RnMnKTtcbmNvbnN0IEVSUk9SU19QQVRIX0FCUyA9IHBhdGguam9pbihST09UX1BBVEhfQUJTLCAnZXJyb3JzJyk7XG5teWZzLmNyZWF0ZUlmTm90RXhpc3RzKEVSUk9SU19QQVRIX0FCUyk7XG4vLyAvc3JjL3RlbXBsYXRlc1xuLy8gY29uc3QgVEVNUExBVEVTX1BBVEhfQUJTID0gcGF0aC5qb2luKFJPT1RfUEFUSF9BQlMsICd0ZW1wbGF0ZXMnKTtcbi8vIC9zcmMvU2FsYW1hbmRlclxuLy8gVE9ETzogVEVTVCBPTiBXSU5ET1dTXG5jb25zdCBTQUxBTUFOREVSX1BBVEhfQUJTID0gcGF0aC5qb2luKFNSQ19QQVRIX0FCUy5zbGljZSgxKSwgJ1NhbGFtYW5kZXIvJyk7XG5cbi8vIC9zcmMvZXhwZXJpbWVudHNcbmNvbnN0IEVYUEVSSU1FTlRTX1BBVEhfQUJTID0gcGF0aC5qb2luKFNSQ19QQVRIX0FCUywgJ2V4cGVyaW1lbnRzJyk7XG5teWZzLmNyZWF0ZUlmTm90RXhpc3RzKEVYUEVSSU1FTlRTX1BBVEhfQUJTKTtcbmNvbnN0IFNFU1NJT05fUEFUSF9BQlMgPSBwYXRoLmpvaW4oRVJST1JTX1BBVEhfQUJTLCBgc2Vzc2lvbl9fJHtuZXcgRGF0ZSgpLmh1bWFuKCl9YCk7XG5pZiAoIERFQlVHICkge1xuICAgIG15ZnMuY3JlYXRlSWZOb3RFeGlzdHMoU0VTU0lPTl9QQVRIX0FCUyk7XG59XG5cbi8vIC9zcmMvZXhwZXJpbWVudHMvdHJ1dGhzXG5jb25zdCBUUlVUSFNfUEFUSF9BQlMgPSBwYXRoLmpvaW4oRVhQRVJJTUVOVFNfUEFUSF9BQlMsICd0cnV0aHMnKTtcbm15ZnMuY3JlYXRlSWZOb3RFeGlzdHMoVFJVVEhTX1BBVEhfQUJTKTtcbi8vIC9zcmMvZXhwZXJpbWVudHMvY29uZmlnc1xuY29uc3QgQ09ORklHU19QQVRIX0FCUyA9IHBhdGguam9pbihFWFBFUklNRU5UU19QQVRIX0FCUywgJ2NvbmZpZ3MnKTtcbm15ZnMuY3JlYXRlSWZOb3RFeGlzdHMoQ09ORklHU19QQVRIX0FCUyk7XG4vLyAvc3JjL2V4cGVyaW1lbnRzL3N1YmplY3RzXG5jb25zdCBTVUJKRUNUU19QQVRIX0FCUyA9IHBhdGguam9pbihFWFBFUklNRU5UU19QQVRIX0FCUywgJ3N1YmplY3RzJyk7XG5teWZzLmNyZWF0ZUlmTm90RXhpc3RzKFNVQkpFQ1RTX1BBVEhfQUJTKTtcblxuY29uc3QgY3VycmVudFdpbmRvdyA9IHJlbW90ZS5nZXRDdXJyZW50V2luZG93KCk7XG5jdXJyZW50V2luZG93Lm9uKFwiZm9jdXNcIiwgKCkgPT4ge1xuICAgIFxuICAgIHJlbW90ZS5nbG9iYWxTaG9ydGN1dC5yZWdpc3RlcignQ29tbWFuZE9yQ29udHJvbCtZJywgKCkgPT4gcmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKS53ZWJDb250ZW50cy5vcGVuRGV2VG9vbHMoKSk7XG4gICAgcmVtb3RlLmdsb2JhbFNob3J0Y3V0LnJlZ2lzdGVyKCdDb21tYW5kT3JDb250cm9sK1EnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZGVmYXVsdCA6IE15QWxlcnQgfSA9IHJlcXVpcmUoJy4vTXlBbGVydCcpO1xuICAgICAgICBjb25zb2xlLmxvZygnY3RybCtxJywgTXlBbGVydCk7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGF3YWl0IE15QWxlcnQuYmlnLnR3b0J1dHRvbnMoJ1Jlc2V0IGZpbmlzaGVkIHRyaWFscyBjb3VudCBhbmQgYmFjayB0byBOZXcgcGFnZT8nKTtcbiAgICAgICAgaWYgKCBhY3Rpb24gPT09IFwiY2FuY2VsXCIgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVxdWlyZSgnLi9HbG9iJykuZGVmYXVsdC5CaWdDb25maWcubGFzdF9wYWdlID0gJ25ldyc7XG4gICAgICAgIHJlbW90ZS5nZXRDdXJyZW50V2luZG93KCkucmVsb2FkKCk7XG4gICAgfSk7XG59KTtcbmN1cnJlbnRXaW5kb3cub24oJ2JsdXInLCAoKSA9PiByZW1vdGUuZ2xvYmFsU2hvcnRjdXQudW5yZWdpc3RlckFsbCgpKTtcbmlmICggREVCVUcgKSB7XG4gICAgY29uc3QgeyBkZWZhdWx0IDogbG9nIH0gPSByZXF1aXJlKCdlbGVjdHJvbi1sb2cnKTtcbiAgICBsb2dbMV0gPSBsb2cubG9nO1xuICAgIGxvZ1syXSA9IGxvZy53YXJuO1xuICAgIGxvZ1szXSA9IGxvZy5lcnJvcjtcbiAgICBsb2cudHJhbnNwb3J0cy5maWxlLmZpbGUgPSBwYXRoLmpvaW4oU0VTU0lPTl9QQVRIX0FCUywgJ2xvZy5sb2cnKTtcbiAgICAvKmxvZy5jYXRjaEVycm9ycyh7XG4gICAgIG9uRXJyb3IoZXJyb3I6IEVycm9yKTogdm9pZCB7XG4gICAgIGNvbnN0IHsgd2hhdCwgd2hlcmUgfSA9IGVycm9yLnRvT2JqKCk7XG4gICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKGVycm9yKTtcbiAgICAgY29uc3Qgc3RhY2sgPSBlcnJvci5zdGFjay5zcGxpdCgnXFxuJylcbiAgICAgLmZpbHRlcihzID0+IHMuaW5jbHVkZXMoUk9PVF9QQVRIX0FCUykgJiYgIXMuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcycpKVxuICAgICAubWFwKHMgPT4ge1xuICAgICBjb25zb2xlLmxvZyhzKTtcbiAgICAgcyA9IHMudHJpbSgpO1xuICAgICBsZXQgZnJhbWUgPSBzLnNsaWNlKHMuc2VhcmNoKFJPT1RfUEFUSF9BQlMpLCBzLmxlbmd0aCAtIDEpO1xuICAgICBsZXQgWyBmaWxlLCBsaW5lbm8sIC4uLnJlc3QgXSA9IGZyYW1lLnNwbGl0KCc6Jyk7XG4gICAgIGZpbGUgPSBwYXRoLnJlbGF0aXZlKFJPT1RfUEFUSF9BQlMsIGZpbGUpO1xuICAgICByZXR1cm4geyBmaWxlLCBsaW5lbm8gfTtcbiAgICAgfSk7XG4gICAgIFxuICAgICBcbiAgICAgfVxuICAgICB9KTsqL1xuICAgIGN1cnJlbnRXaW5kb3cud2ViQ29udGVudHMub24oXCJjb25zb2xlLW1lc3NhZ2VcIiwgKGV2ZW50LCBsZXZlbCwgbWVzc2FnZSwgbGluZSwgc291cmNlSWQpID0+IHtcbiAgICAgICAgaWYgKCBsZXZlbCA+PSAzICkge1xuICAgICAgICAgICAgbGV2ZWwgPSB7IDEgOiAnTE9HJywgMiA6ICdXQVJOJywgMyA6ICdFUlJPUicgfVtsZXZlbF07XG4gICAgICAgICAgICBzb3VyY2VJZCA9IHBhdGgucmVsYXRpdmUoUk9PVF9QQVRIX0FCUywgc291cmNlSWQpO1xuICAgICAgICAgICAgbG9nLnRyYW5zcG9ydHMuZmlsZSh7XG4gICAgICAgICAgICAgICAgZGF0YSA6IFsgYCR7c291cmNlSWR9OiR7bGluZX1gLCBtZXNzYWdlIF0sXG4gICAgICAgICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuY29uc29sZS50YWJsZSh7XG4gICAgX19kaXJuYW1lLFxuICAgIFJPT1RfUEFUSF9BQlMsXG4gICAgU1JDX1BBVEhfQUJTLFxuICAgIEVSUk9SU19QQVRIX0FCUyxcbiAgICBTQUxBTUFOREVSX1BBVEhfQUJTLFxuICAgIEVYUEVSSU1FTlRTX1BBVEhfQUJTLFxuICAgIFRSVVRIU19QQVRIX0FCUyxcbiAgICBDT05GSUdTX1BBVEhfQUJTLFxuICAgIFNVQkpFQ1RTX1BBVEhfQUJTLFxuICAgIERFQlVHLCBEUllSVU4sIE5PUFlUSE9OXG59KTtcblxuXG5jb25zb2xlLmdyb3VwRW5kKCk7XG4iXX0=