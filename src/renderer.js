console.group(`renderer.ts`);
const { remote } = require('electron');
const argvars = remote.process.argv.slice(2).map(s => s.toLowerCase());
const DEBUG = argvars.includes('debug');
const DRYRUN = argvars.includes('dry-run');
const path = require('path');
let ROOT_PATH_ABS;
let SRC_PATH_ABS;
if (path.basename(__dirname) === 'src') {
    ROOT_PATH_ABS = path.join(__dirname, '..');
    SRC_PATH_ABS = __dirname;
}
else {
    ROOT_PATH_ABS = __dirname;
    SRC_PATH_ABS = path.join(ROOT_PATH_ABS, 'src');
}
const TEMPLATES_PATH_ABS = path.join(ROOT_PATH_ABS, 'templates');
const SALAMANDER_PATH_ABS = path.join(TEMPLATES_PATH_ABS, 'Salamander');
const EXPERIMENTS_PATH_ABS = path.join(SRC_PATH_ABS, 'experiments');
const TRUTHS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'truths');
const CONFIGS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'configs');
const SUBJECTS_PATH_ABS = path.join(EXPERIMENTS_PATH_ABS, 'subjects');
process.env.ROOT_PATH_ABS = ROOT_PATH_ABS;
process.env.SRC_PATH_ABS = SRC_PATH_ABS;
process.env.TEMPLATES_PATH_ABS = TEMPLATES_PATH_ABS;
process.env.SALAMANDER_PATH_ABS = SALAMANDER_PATH_ABS;
process.env.EXPERIMENTS_PATH_ABS = EXPERIMENTS_PATH_ABS;
process.env.TRUTHS_PATH_ABS = TRUTHS_PATH_ABS;
process.env.CONFIGS_PATH_ABS = CONFIGS_PATH_ABS;
process.env.SUBJECTS_PATH_ABS = SUBJECTS_PATH_ABS;
console.table({
    __dirname, ROOT_PATH_ABS, SRC_PATH_ABS,
    TEMPLATES_PATH_ABS,
    SALAMANDER_PATH_ABS,
    EXPERIMENTS_PATH_ABS,
    TRUTHS_PATH_ABS,
    CONFIGS_PATH_ABS,
    SUBJECTS_PATH_ABS,
    DEBUG, DRYRUN,
});
Object.defineProperty(Object.prototype, "keys", {
    enumerable: false,
    value() {
        return Object.keys(this).map(key => key.isdigit()
            ? parseInt(key) : key);
    }
});
Object.defineProperty(Array.prototype, "last", {
    enumerable: false,
    value() {
        return this[this.length - 1];
    }
});
Object.defineProperty(Array.prototype, "lowerAll", {
    enumerable: false,
    value() {
        return this.map(s => s.lower());
    }
});
Object.defineProperty(Array.prototype, "rsort", {
    enumerable: false,
    value() {
        return this.sort((n, m) => n < m);
    }
});
Object.defineProperty(Array.prototype, "count", {
    enumerable: false,
    value(item, strict = false) {
        let _count = 0;
        for (let x of this) {
            if (strict) {
                if (x === item)
                    _count++;
            }
            else if (x == item) {
                _count++;
            }
        }
        return _count;
    }
});
Object.defineProperty(String.prototype, "upTo", {
    enumerable: false,
    value(searchString, searchFromEnd = false) {
        let end = searchFromEnd
            ? this.lastIndexOf(searchString)
            : this.indexOf(searchString);
        if (end === -1)
            console.warn(`${this.valueOf()}.upTo(${searchString},${searchFromEnd}) index is -1`);
        return this.slice(0, end);
    }
});
Object.defineProperty(String.prototype, "in", {
    enumerable: false,
    value(arr) {
        return arr.includes(this.valueOf());
    }
});
Object.defineProperty(String.prototype, "lower", {
    enumerable: false,
    value() {
        return this.toLowerCase();
    }
});
Object.defineProperty(String.prototype, "upper", {
    enumerable: false,
    value() {
        return this.toUpperCase();
    }
});
Object.defineProperty(String.prototype, "title", {
    enumerable: false,
    value() {
        if (this.includes(' '))
            return this.split(' ').map(str => str.title()).join(' ');
        else
            return this[0].upper() + this.slice(1, this.length).lower();
    }
});
Object.defineProperty(String.prototype, "isdigit", {
    enumerable: false,
    value() {
        return !isNaN(Math.floor(this));
    }
});
Object.defineProperty(String.prototype, "removeAll", {
    enumerable: false,
    value(removeValue, ...removeValues) {
        let temp = this;
        for (let value of [removeValue, ...removeValues])
            temp = temp.replaceAll(value, '');
        return temp;
    }
});
Object.defineProperty(String.prototype, "replaceAll", {
    enumerable: false,
    value(searchValue, replaceValue) {
        const type = typeof searchValue;
        if (type === 'string' || type === 'number') {
            return this
                .split(searchValue)
                .join(replaceValue);
        }
        else if (type === 'object') {
            let temp = this;
            for (let [sv, rv] of Object.entries(searchValue))
                temp = temp.replaceAll(sv, rv);
            return temp;
        }
        else {
            console.warn(`replaceAll got a bad type, searchValue: ${searchValue}, type: ${type}`);
            return this;
        }
    }
});
Object.defineProperty(Number.prototype, "human", {
    enumerable: false,
    value(letters = false) {
        switch (Math.floor(this) + 1) {
            case 0:
                return letters
                    ? "zeroth"
                    : "0th";
            case 1:
                return letters
                    ? "first"
                    : "1st";
            case 2:
                return letters
                    ? "second"
                    : "2nd";
            case 3:
                return letters
                    ? "third"
                    : "3rd";
            case 4:
                return letters
                    ? "fourth"
                    : "4th";
            case 5:
                return letters
                    ? "fifth"
                    : "5th";
            case 6:
                return letters
                    ? "sixth"
                    : "6th";
            case 7:
                return letters
                    ? "seventh"
                    : "7th";
            case 8:
                return letters
                    ? "eighth"
                    : "8th";
            case 9:
                return letters
                    ? "ninth"
                    : "9th";
            default:
                return `${Math.floor(this) + 1}th`;
        }
    }
});
Object.defineProperty(Date.prototype, "human", {
    enumerable: false, value() {
        let d = this.getUTCDate();
        d = d < 10 ? `0${d}` : d;
        let m = this.getMonth() + 1;
        m = m < 10 ? `0${m}` : m;
        const y = this.getFullYear();
        const t = this.toTimeString().slice(0, 8).replaceAll(':', '-');
        return `${d}_${m}_${y}_${t}`;
    }
});
console.groupEnd();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZW5kZXJlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBRTdCLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDdkMsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZFLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDeEMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUUzQyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFFN0IsSUFBSSxhQUFxQixDQUFDO0FBQzFCLElBQUksWUFBb0IsQ0FBQztBQUN6QixJQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssS0FBSyxFQUFHO0lBQ3RDLGFBQWEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMzQyxZQUFZLEdBQUcsU0FBUyxDQUFDO0NBQzVCO0tBQU07SUFDSCxhQUFhLEdBQUcsU0FBUyxDQUFDO0lBQzFCLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNsRDtBQUVELE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFFakUsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFF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QyxPQUFPO29CQUNULENBQUMsQ0FBQyxLQUFLLENBQUM7WUFFaEI7Z0JBQ0ksT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7U0FDMUM7SUFFTCxDQUFDO0NBQ0osQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRTtJQUMzQyxVQUFVLEVBQUcsS0FBSyxFQUFFLEtBQUs7UUFDckIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzFCLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM1QixDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM3QixNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQy9ELE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0NBQ0osQ0FBQyxDQUFDO0FBT0gsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIHJlcXVpcmVkIGJ5IHRoZSBpbmRleC5odG1sIGZpbGUgYW5kIHdpbGxcbi8vIGJlIGV4ZWN1dGVkIGluIHRoZSByZW5kZXJlciBwcm9jZXNzIGZvciB0aGF0IHdpbmRvdy5cbi8vIE5vIE5vZGUuanMgQVBJcyBhcmUgYXZhaWxhYmxlIGluIHRoaXMgcHJvY2VzcyBiZWNhdXNlXG4vLyBgbm9kZUludGVncmF0aW9uYCBpcyB0dXJuZWQgb2ZmLiBVc2UgYHByZWxvYWQuanNgIHRvXG4vLyBzZWxlY3RpdmVseSBlbmFibGUgZmVhdHVyZXMgbmVlZGVkIGluIHRoZSByZW5kZXJpbmdcbi8vIHByb2Nlc3MuXG5jb25zb2xlLmdyb3VwKGByZW5kZXJlci50c2ApO1xuXG5jb25zdCB7IHJlbW90ZSB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcbmNvbnN0IGFyZ3ZhcnMgPSByZW1vdGUucHJvY2Vzcy5hcmd2LnNsaWNlKDIpLm1hcChzID0+IHMudG9Mb3dlckNhc2UoKSk7XG5jb25zdCBERUJVRyA9IGFyZ3ZhcnMuaW5jbHVkZXMoJ2RlYnVnJyk7XG5jb25zdCBEUllSVU4gPSBhcmd2YXJzLmluY2x1ZGVzKCdkcnktcnVuJyk7XG4vLyBAdHMtaWdub3JlXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuLy8gY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xubGV0IFJPT1RfUEFUSF9BQlM6IHN0cmluZztcbmxldCBTUkNfUEFUSF9BQlM6IHN0cmluZztcbmlmICggcGF0aC5iYXNlbmFtZShfX2Rpcm5hbWUpID09PSAnc3JjJyApIHtcbiAgICBST09UX1BBVEhfQUJTID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJyk7XG4gICAgU1JDX1BBVEhfQUJTID0gX19kaXJuYW1lO1xufSBlbHNlIHtcbiAgICBST09UX1BBVEhfQUJTID0gX19kaXJuYW1lO1xuICAgIFNSQ19QQVRIX0FCUyA9IHBhdGguam9pbihST09UX1BBVEhfQUJTLCAnc3JjJyk7XG59XG4vLyAvc3JjL3RlbXBsYXRlc1xuY29uc3QgVEVNUExBVEVTX1BBVEhfQUJTID0gcGF0aC5qb2luKFJPT1RfUEFUSF9BQlMsICd0ZW1wbGF0ZXMnKTtcbi8vIC9zcmMvdGVtcGxhdGVzL1NhbGFtYW5kZXJcbmNvbnN0IFNBTEFNQU5ERVJfUEFUSF9BQlMgPSBwYXRoLmpvaW4oVEVNUExBVEVTX1BBVEhfQUJTLCAnU2FsYW1hbmRlcicpO1xuXG4vLyAvc3JjL2V4cGVyaW1lbnRzXG5jb25zdCBFWFBFUklNRU5UU19QQVRIX0FCUyA9IHBhdGguam9pbihTUkNfUEFUSF9BQlMsICdleHBlcmltZW50cycpO1xuLy8gL3NyYy9leHBlcmltZW50cy90cnV0aHNcbmNvbnN0IFRSVVRIU19QQVRIX0FCUyA9IHBhdGguam9pbihFWFBFUklNRU5UU19QQVRIX0FCUywgJ3RydXRocycpO1xuLy8gL3NyYy9leHBlcmltZW50cy9jb25maWdzXG5jb25zdCBDT05GSUdTX1BBVEhfQUJTID0gcGF0aC5qb2luKEVYUEVSSU1FTlRTX1BBVEhfQUJTLCAnY29uZmlncycpO1xuLy8gL3NyYy9leHBlcmltZW50cy9zdWJqZWN0c1xuY29uc3QgU1VCSkVDVFNfUEFUSF9BQlMgPSBwYXRoLmpvaW4oRVhQRVJJTUVOVFNfUEFUSF9BQlMsICdzdWJqZWN0cycpO1xucHJvY2Vzcy5lbnYuUk9PVF9QQVRIX0FCUyA9IFJPT1RfUEFUSF9BQlM7XG5wcm9jZXNzLmVudi5TUkNfUEFUSF9BQlMgPSBTUkNfUEFUSF9BQlM7XG5cbnByb2Nlc3MuZW52LlRFTVBMQVRFU19QQVRIX0FCUyA9IFRFTVBMQVRFU19QQVRIX0FCUztcbnByb2Nlc3MuZW52LlNBTEFNQU5ERVJfUEFUSF9BQlMgPSBTQUxBTUFOREVSX1BBVEhfQUJTO1xuXG5wcm9jZXNzLmVudi5FWFBFUklNRU5UU19QQVRIX0FCUyA9IEVYUEVSSU1FTlRTX1BBVEhfQUJTO1xucHJvY2Vzcy5lbnYuVFJVVEhTX1BBVEhfQUJTID0gVFJVVEhTX1BBVEhfQUJTO1xucHJvY2Vzcy5lbnYuQ09ORklHU19QQVRIX0FCUyA9IENPTkZJR1NfUEFUSF9BQlM7XG5wcm9jZXNzLmVudi5TVUJKRUNUU19QQVRIX0FCUyA9IFNVQkpFQ1RTX1BBVEhfQUJTO1xuXG4vLyAqKiAgUHl0aG9uU2hlbGxcbi8qY29uc3QgeyBQeXRob25TaGVsbCB9ID0gcmVxdWlyZShcInB5dGhvbi1zaGVsbFwiKTtcbiBjb25zdCBlbmdpbmVQYXRoID0gcGF0aC5qb2luKFJPT1RfUEFUSF9BQlMsIFwiZW5naW5lXCIpO1xuIGNvbnN0IHB5RXhlY1BhdGggPSBwYXRoLmpvaW4oZW5naW5lUGF0aCwgcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gXCJsaW51eFwiID8gXCJlbnYvYmluL3B5dGhvblwiIDogXCJlbnYvU2NyaXB0cy9weXRob24uZXhlXCIpOyovXG5cbmNvbnNvbGUudGFibGUoe1xuICAgIF9fZGlybmFtZSwgUk9PVF9QQVRIX0FCUywgU1JDX1BBVEhfQUJTLFxuICAgIFRFTVBMQVRFU19QQVRIX0FCUyxcbiAgICBTQUxBTUFOREVSX1BBVEhfQUJTLFxuICAgIEVYUEVSSU1FTlRTX1BBVEhfQUJTLFxuICAgIFRSVVRIU19QQVRIX0FCUyxcbiAgICBDT05GSUdTX1BBVEhfQUJTLFxuICAgIFNVQkpFQ1RTX1BBVEhfQUJTLFxuICAgIERFQlVHLCBEUllSVU4sXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsIFwia2V5c1wiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKCk6IEFycmF5PHN0cmluZyB8IG51bWJlcj4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzKS5tYXAoa2V5ID0+IGtleS5pc2RpZ2l0KClcbiAgICAgICAgICAgID8gcGFyc2VJbnQoa2V5KSA6IGtleSk7XG4gICAgfVxufSk7XG4vLyAqKiAgQXJyYXlcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwibGFzdFwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpc1t0aGlzLmxlbmd0aCAtIDFdO1xuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwibG93ZXJBbGxcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAocyA9PiBzLmxvd2VyKCkpO1xuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwicnNvcnRcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydCgobiwgbSkgPT4gbiA8IG0pO1xuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwiY291bnRcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZShpdGVtOiBhbnksIHN0cmljdCA9IGZhbHNlKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IF9jb3VudCA9IDA7XG4gICAgICAgIGZvciAoIGxldCB4IG9mIHRoaXMgKSB7XG4gICAgICAgICAgICBpZiAoIHN0cmljdCApIHtcbiAgICAgICAgICAgICAgICBpZiAoIHggPT09IGl0ZW0gKVxuICAgICAgICAgICAgICAgICAgICBfY291bnQrKztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHggPT0gaXRlbSApIHtcbiAgICAgICAgICAgICAgICBfY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2NvdW50O1xuICAgICAgICBcbiAgICB9XG4gICAgXG59LCk7XG4vLyAqKiAgU3RyaW5nXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJ1cFRvXCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgdmFsdWUoc2VhcmNoU3RyaW5nOiBzdHJpbmcsIHNlYXJjaEZyb21FbmQgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgICAgIGxldCBlbmQgPSBzZWFyY2hGcm9tRW5kXG4gICAgICAgICAgICA/IHRoaXMubGFzdEluZGV4T2Yoc2VhcmNoU3RyaW5nKVxuICAgICAgICAgICAgOiB0aGlzLmluZGV4T2Yoc2VhcmNoU3RyaW5nKTtcbiAgICAgICAgaWYgKCBlbmQgPT09IC0xIClcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgJHt0aGlzLnZhbHVlT2YoKX0udXBUbygke3NlYXJjaFN0cmluZ30sJHtzZWFyY2hGcm9tRW5kfSkgaW5kZXggaXMgLTFgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMCwgZW5kKTtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJpblwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKGFycjogYW55W10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGFyci5pbmNsdWRlcyh0aGlzLnZhbHVlT2YoKSk7XG4gICAgfVxufSwpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwibG93ZXJcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBcInVwcGVyXCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgdmFsdWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9VcHBlckNhc2UoKTtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIFxuICAgICAgICBpZiAoIHRoaXMuaW5jbHVkZXMoJyAnKSApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zcGxpdCgnICcpLm1hcChzdHIgPT4gc3RyLnRpdGxlKCkpLmpvaW4oJyAnKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbMF0udXBwZXIoKSArIHRoaXMuc2xpY2UoMSwgdGhpcy5sZW5ndGgpLmxvd2VyKCk7XG4gICAgICAgIFxuICAgIH1cbn0sKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBcImlzZGlnaXRcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICB2YWx1ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICFpc05hTihNYXRoLmZsb29yKHRoaXMpKTtcbiAgICB9XG59LCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJyZW1vdmVBbGxcIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSxcbiAgICBcbiAgICB2YWx1ZShyZW1vdmVWYWx1ZSwgLi4ucmVtb3ZlVmFsdWVzKSB7XG4gICAgICAgIGxldCB0ZW1wID0gdGhpcztcbiAgICAgICAgZm9yICggbGV0IHZhbHVlIG9mIFsgcmVtb3ZlVmFsdWUsIC4uLnJlbW92ZVZhbHVlcyBdIClcbiAgICAgICAgICAgIHRlbXAgPSB0ZW1wLnJlcGxhY2VBbGwodmFsdWUsICcnKTtcbiAgICAgICAgcmV0dXJuIHRlbXA7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgXCJyZXBsYWNlQWxsXCIsIHtcbiAgICBlbnVtZXJhYmxlIDogZmFsc2UsXG4gICAgXG4gICAgdmFsdWUoc2VhcmNoVmFsdWU6IChzdHJpbmcgfCBudW1iZXIpIHwgVE1hcDxzdHJpbmc+LCByZXBsYWNlVmFsdWU/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiBzZWFyY2hWYWx1ZTtcbiAgICAgICAgaWYgKCB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlID09PSAnbnVtYmVyJyApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgICAgICAgLnNwbGl0KHNlYXJjaFZhbHVlKVxuICAgICAgICAgICAgICAgIC5qb2luKHJlcGxhY2VWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIHR5cGUgPT09ICdvYmplY3QnICkge1xuICAgICAgICAgICAgbGV0IHRlbXAgPSB0aGlzO1xuICAgICAgICAgICAgZm9yICggbGV0IFsgc3YsIHJ2IF0gb2YgT2JqZWN0LmVudHJpZXMoc2VhcmNoVmFsdWUpIClcbiAgICAgICAgICAgICAgICB0ZW1wID0gdGVtcC5yZXBsYWNlQWxsKHN2LCBydik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0ZW1wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGByZXBsYWNlQWxsIGdvdCBhIGJhZCB0eXBlLCBzZWFyY2hWYWx1ZTogJHtzZWFyY2hWYWx1ZX0sIHR5cGU6ICR7dHlwZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4vLyAqKiAgTnVtYmVyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoTnVtYmVyLnByb3RvdHlwZSwgXCJodW1hblwiLCB7XG4gICAgZW51bWVyYWJsZSA6IGZhbHNlLFxuICAgIHZhbHVlKGxldHRlcnMgPSBmYWxzZSkge1xuICAgICAgICBzd2l0Y2ggKCBNYXRoLmZsb29yKHRoaXMpICsgMSApIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwiemVyb3RoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjB0aFwiO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJmaXJzdFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIxc3RcIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwic2Vjb25kXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjJuZFwiO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJ0aGlyZFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCIzcmRcIjtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwiZm91cnRoXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIjR0aFwiO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgICAgID8gXCJmaWZ0aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCI1dGhcIjtcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwic2l4dGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiNnRoXCI7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcInNldmVudGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiN3RoXCI7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlcnNcbiAgICAgICAgICAgICAgICAgICAgPyBcImVpZ2h0aFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCI4dGhcIjtcbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICA/IFwibmludGhcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiOXRoXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke01hdGguZmxvb3IodGhpcykgKyAxfXRoYDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG59KTtcbi8vICoqICBEYXRlXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0ZS5wcm90b3R5cGUsIFwiaHVtYW5cIiwge1xuICAgIGVudW1lcmFibGUgOiBmYWxzZSwgdmFsdWUoKSB7XG4gICAgICAgIGxldCBkID0gdGhpcy5nZXRVVENEYXRlKCk7XG4gICAgICAgIGQgPSBkIDwgMTAgPyBgMCR7ZH1gIDogZDtcbiAgICAgICAgbGV0IG0gPSB0aGlzLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICBtID0gbSA8IDEwID8gYDAke219YCA6IG07XG4gICAgICAgIGNvbnN0IHkgPSB0aGlzLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnRvVGltZVN0cmluZygpLnNsaWNlKDAsIDgpLnJlcGxhY2VBbGwoJzonLCAnLScpO1xuICAgICAgICByZXR1cm4gYCR7ZH1fJHttfV8ke3l9XyR7dH1gO1xuICAgIH1cbn0pO1xuXG5cbi8qbW9kdWxlLmV4cG9ydHMgPSB7XG4gUHl0aG9uU2hlbGxcbiB9OyovXG5cbmNvbnNvbGUuZ3JvdXBFbmQoKTtcbiJdfQ==