"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("../util");
console.group('MyPyShell.index.ts');
const python_shell_1 = require("python-shell");
const enginePath = path.join(SRC_PATH_ABS, "engine");
const pyExecPath = path.join(enginePath, process.platform === "linux" ? "env/bin/python" : "env/Scripts/python.exe");
python_shell_1.PythonShell.defaultOptions = {
    pythonPath: pyExecPath,
    pythonOptions: ['-OO'],
};
class MyPyShell extends python_shell_1.PythonShell {
    constructor(scriptPath, options) {
        [scriptPath, options] = MyPyShell.handleArguments(scriptPath, options);
        super(scriptPath, options);
    }
    static handleArguments(scriptPath, options) {
        if (!util_1.bool(options)) {
            options = { args: [], pythonOptions: ['-OO'] };
        }
        else {
            if (options.args === undefined)
                options.args = [];
            if (options.pythonOptions === undefined)
                options.pythonOptions = ['-OO'];
        }
        if (scriptPath.startsWith('-m')) {
            scriptPath = scriptPath.slice(3);
            if (!options.pythonOptions) {
                options.pythonOptions = ['-m'];
            }
            else {
                if (!options.pythonOptions.includes('-m')) {
                    options.pythonOptions.push('-m');
                }
            }
        }
        options.args = [ROOT_PATH_ABS, ...options.args];
        if (DEBUG)
            options.args.push('debug');
        if (DRYRUN)
            options.args.push('dry-run');
        return [scriptPath, options];
    }
    async runAsync() {
        return new Promise((resolve, reject) => {
            const messages = [];
            this.on('message', message => {
                messages.push(message.removeAll(MyPyShell.colorRegex));
            });
            this.end((err, code, signal) => {
                if (err)
                    reject(err);
                resolve(messages);
            });
        });
    }
    static run(scriptPath, options, callback) {
        [scriptPath, options] = MyPyShell.handleArguments(scriptPath, options);
        if (!callback) {
            callback = (err, output) => {
                if (err) {
                    console.error(err);
                }
                if (output) {
                    output = output.map(m => m.removeAll(MyPyShell.colorRegex));
                    console.log(`%c${scriptPath}\n`, 'font-weight: bold', output.join('\n'));
                }
            };
        }
        return python_shell_1.PythonShell.run(scriptPath, options, callback);
    }
}
MyPyShell.colorRegex = /.?\[\d{1,3}m/;
let isChecksModuleDone = false;
let isChecksDirsDone = false;
let isChecksCfgDone = false;
function isDone() {
    return isChecksModuleDone;
}
exports.isDone = isDone;
const Store = new (require("electron-store"))();
console.log(`Store.path: `, Store.path);
const PyChecksModule = new MyPyShell('-m checks', {
    args: [Store.path]
});
PyChecksModule.runAsync().then(msgs => {
    isChecksModuleDone = true;
    console.log('PyChecksModule msgs:', msgs.join('\n'));
});
console.groupEnd();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGtDQUErQjtBQUUvQixPQUFPLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDcEMsK0NBQXNFO0FBRXRFLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ3JELE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxRQUFRLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUVySCwwQkFBVyxDQUFDLGNBQWMsR0FBRztJQUN6QixVQUFVLEVBQUcsVUFBVTtJQUV2QixhQUFhLEVBQUcsQ0FBRSxLQUFLLENBQUU7Q0FDNUIsQ0FBQztBQUVGLE1BQU0sU0FBVSxTQUFRLDBCQUFXO0lBRy9CLFlBQVksVUFBa0IsRUFBRSxPQUFpQjtRQUM3QyxDQUFFLFVBQVUsRUFBRSxPQUFPLENBQUUsR0FBRyxTQUFTLENBQUMsZUFBZSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUN6RSxLQUFLLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRS9CLENBQUM7SUFFRCxNQUFNLENBQUMsZUFBZSxDQUFDLFVBQWtCLEVBQUUsT0FBaUI7UUFDeEQsSUFBSyxDQUFDLFdBQUksQ0FBQyxPQUFPLENBQUMsRUFBRztZQUNsQixPQUFPLEdBQUcsRUFBRSxJQUFJLEVBQUcsRUFBRSxFQUFFLGFBQWEsRUFBRyxDQUFFLEtBQUssQ0FBRSxFQUFFLENBQUM7U0FDdEQ7YUFBTTtZQUNILElBQUssT0FBTyxDQUFDLElBQUksS0FBSyxTQUFTO2dCQUMzQixPQUFPLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUN0QixJQUFLLE9BQU8sQ0FBQyxh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SUFBSSxlQUFlLEdBQUcsS0FBSyxDQUFDO0FBRTVCLFNBQVMsTUFBTTtJQUVYLE9BQU8sa0JBQWtCLENBQUE7QUFDN0IsQ0FBQztBQXdDUSx3QkFBTTtBQXRDZixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxDQUFDO0FBR2hELE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN4QyxNQUFNLGNBQWMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxXQUFXLEVBQUU7SUFDOUMsSUFBSSxFQUFHLENBQUUsS0FBSyxDQUFDLElBQUksQ0FBRTtDQUN4QixDQUFDLENBQUM7QUFDSCxjQUFjLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDLGtCQUFrQixHQUFHLElBQUksQ0FBQztJQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN6RCxDQUFDLENBQUMsQ0FBQztBQTZCSCxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBib29sIH0gZnJvbSBcIi4uL3V0aWxcIjtcblxuY29uc29sZS5ncm91cCgnTXlQeVNoZWxsLmluZGV4LnRzJyk7XG5pbXBvcnQgeyBPcHRpb25zLCBQeXRob25TaGVsbCwgUHl0aG9uU2hlbGxFcnJvciB9IGZyb20gJ3B5dGhvbi1zaGVsbCc7XG5cbmNvbnN0IGVuZ2luZVBhdGggPSBwYXRoLmpvaW4oU1JDX1BBVEhfQUJTLCBcImVuZ2luZVwiKTtcbmNvbnN0IHB5RXhlY1BhdGggPSBwYXRoLmpvaW4oZW5naW5lUGF0aCwgcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gXCJsaW51eFwiID8gXCJlbnYvYmluL3B5dGhvblwiIDogXCJlbnYvU2NyaXB0cy9weXRob24uZXhlXCIpO1xuXG5QeXRob25TaGVsbC5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBweXRob25QYXRoIDogcHlFeGVjUGF0aCxcbiAgICAvLyBzY3JpcHRQYXRoIDogZW5naW5lUGF0aCxcbiAgICBweXRob25PcHRpb25zIDogWyAnLU9PJyBdLFxufTtcblxuY2xhc3MgTXlQeVNoZWxsIGV4dGVuZHMgUHl0aG9uU2hlbGwge1xuICAgIHN0YXRpYyByZWFkb25seSBjb2xvclJlZ2V4ID0gLy4/XFxbXFxkezEsM31tLztcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihzY3JpcHRQYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBPcHRpb25zKSB7XG4gICAgICAgIFsgc2NyaXB0UGF0aCwgb3B0aW9ucyBdID0gTXlQeVNoZWxsLmhhbmRsZUFyZ3VtZW50cyhzY3JpcHRQYXRoLCBvcHRpb25zKTtcbiAgICAgICAgc3VwZXIoc2NyaXB0UGF0aCwgb3B0aW9ucyk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgaGFuZGxlQXJndW1lbnRzKHNjcmlwdFBhdGg6IHN0cmluZywgb3B0aW9ucz86IE9wdGlvbnMpOiBbIHN0cmluZywgT3B0aW9ucyBdIHtcbiAgICAgICAgaWYgKCAhYm9vbChvcHRpb25zKSApIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IGFyZ3MgOiBbXSwgcHl0aG9uT3B0aW9ucyA6IFsgJy1PTycgXSB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCBvcHRpb25zLmFyZ3MgPT09IHVuZGVmaW5lZCApXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hcmdzID0gW107XG4gICAgICAgICAgICBpZiAoIG9wdGlvbnMucHl0aG9uT3B0aW9ucyA9PT0gdW5kZWZpbmVkIClcbiAgICAgICAgICAgICAgICBvcHRpb25zLnB5dGhvbk9wdGlvbnMgPSBbICctT08nIF07XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBpZiAoIHNjcmlwdFBhdGguc3RhcnRzV2l0aCgnLW0nKSApIHtcbiAgICAgICAgICAgIHNjcmlwdFBhdGggPSBzY3JpcHRQYXRoLnNsaWNlKDMpO1xuICAgICAgICAgICAgaWYgKCAhb3B0aW9ucy5weXRob25PcHRpb25zICkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucHl0aG9uT3B0aW9ucyA9IFsgJy1tJyBdXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICggIW9wdGlvbnMucHl0aG9uT3B0aW9ucy5pbmNsdWRlcygnLW0nKSApIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5weXRob25PcHRpb25zLnB1c2goJy1tJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5hcmdzID0gWyBST09UX1BBVEhfQUJTLCAuLi5vcHRpb25zLmFyZ3MgXTtcbiAgICAgICAgaWYgKCBERUJVRyApXG4gICAgICAgICAgICBvcHRpb25zLmFyZ3MucHVzaCgnZGVidWcnKTtcbiAgICAgICAgaWYgKCBEUllSVU4gKVxuICAgICAgICAgICAgb3B0aW9ucy5hcmdzLnB1c2goJ2RyeS1ydW4nKTtcbiAgICAgICAgcmV0dXJuIFsgc2NyaXB0UGF0aCwgb3B0aW9ucyBdXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGFzeW5jIHJ1bkFzeW5jKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5vbignbWVzc2FnZScsIG1lc3NhZ2UgPT4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gobWVzc2FnZS5yZW1vdmVBbGwoTXlQeVNoZWxsLmNvbG9yUmVnZXgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZW5kKChlcnIsIGNvZGUsIHNpZ25hbCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICggZXJyICkgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIHJ1bihzY3JpcHRQYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBPcHRpb25zLCBjYWxsYmFjaz86IChlcnI/OiBQeXRob25TaGVsbEVycm9yLCBvdXRwdXQ/OiBhbnlbXSkgPT4gYW55KSB7XG4gICAgICAgIFsgc2NyaXB0UGF0aCwgb3B0aW9ucyBdID0gTXlQeVNoZWxsLmhhbmRsZUFyZ3VtZW50cyhzY3JpcHRQYXRoLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCAhY2FsbGJhY2sgKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IChlcnI6IFB5dGhvblNoZWxsRXJyb3IsIG91dHB1dDogYW55W10pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIGVyciApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIG91dHB1dCApIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0Lm1hcChtID0+IG0ucmVtb3ZlQWxsKE15UHlTaGVsbC5jb2xvclJlZ2V4KSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAlYyR7c2NyaXB0UGF0aH1cXG5gLCAnZm9udC13ZWlnaHQ6IGJvbGQnLCBvdXRwdXQuam9pbignXFxuJykpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFB5dGhvblNoZWxsLnJ1bihzY3JpcHRQYXRoLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgICB9XG59XG5cbmxldCBpc0NoZWNrc01vZHVsZURvbmUgPSBmYWxzZTtcbmxldCBpc0NoZWNrc0RpcnNEb25lID0gZmFsc2U7XG5sZXQgaXNDaGVja3NDZmdEb25lID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGlzRG9uZSgpOiBib29sZWFuIHtcbiAgICAvLyByZXR1cm4gaXNDaGVja3NEaXJzRG9uZSAmJiBpc0NoZWNrc0NmZ0RvbmVcbiAgICByZXR1cm4gaXNDaGVja3NNb2R1bGVEb25lXG59XG5cbmNvbnN0IFN0b3JlID0gbmV3IChyZXF1aXJlKFwiZWxlY3Ryb24tc3RvcmVcIikpKCk7XG5cblxuY29uc29sZS5sb2coYFN0b3JlLnBhdGg6IGAsIFN0b3JlLnBhdGgpO1xuY29uc3QgUHlDaGVja3NNb2R1bGUgPSBuZXcgTXlQeVNoZWxsKCctbSBjaGVja3MnLCB7XG4gICAgYXJncyA6IFsgU3RvcmUucGF0aCBdXG59KTtcblB5Q2hlY2tzTW9kdWxlLnJ1bkFzeW5jKCkudGhlbihtc2dzID0+IHtcbiAgICBpc0NoZWNrc01vZHVsZURvbmUgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKCdQeUNoZWNrc01vZHVsZSBtc2dzOicsIG1zZ3Muam9pbignXFxuJykpO1xufSk7XG5cbi8qY29uc3QgUHlDaGVja3NEaXJzID0gbmV3IE15UHlTaGVsbCgnY2hlY2tzLmRpcnMnLCB7XG4gcHl0aG9uT3B0aW9ucyA6IFsgJy1tJywgXSxcbiBhcmdzIDogWyBST09UX1BBVEhfQUJTLCAnZGVidWcnLCAnZHJ5LXJ1bicgXVxuIH0pO1xuIFB5Q2hlY2tzRGlycy5ydW5Bc3luYygpLnRoZW4obXNncyA9PiB7XG4gaXNDaGVja3NEaXJzRG9uZSA9IHRydWU7XG4gY29uc29sZS5sb2coJ1B5Q2hlY2tzRGlycyBtc2dzOicsIG1zZ3Muam9pbignXFxuJykpO1xuIH0pO1xuIFxuIC8vIE15UHlTaGVsbC5ydW4oXCItbSBjaGVja3MuZGlyc1wiKTtcbiBcbiAvLyAqKiAgRWxlY3Ryb24gU3RvcmVcbiBjb25zdCBTdG9yZSA9IG5ldyAocmVxdWlyZShcImVsZWN0cm9uLXN0b3JlXCIpKSgpO1xuIFxuIFxuIGNvbnNvbGUubG9nKGBTdG9yZS5wYXRoOiBgLCBTdG9yZS5wYXRoKTtcbiBjb25zdCBQeUNoZWNrc0NmZyA9IG5ldyBNeVB5U2hlbGwoJ2NoZWNrcy5jb25maWcnLCB7XG4gcHl0aG9uT3B0aW9ucyA6IFsgJy1tJyBdLFxuIGFyZ3MgOiBbIFJPT1RfUEFUSF9BQlMsIFN0b3JlLnBhdGgsICdkZWJ1ZycsICdkcnktcnVuJyBdXG4gfSk7XG4gUHlDaGVja3NDZmcucnVuQXN5bmMoKS50aGVuKG1zZ3MgPT4ge1xuIGlzQ2hlY2tzQ2ZnRG9uZSA9IHRydWU7XG4gY29uc29sZS5sb2coJ1B5Q2hlY2tzQ2ZnIG1zZ3M6JywgbXNncy5qb2luKCdcXG4nKSk7XG4gfSk7XG4gLy8gTXlQeVNoZWxsLnJ1bihcIi1tIGNoZWNrcy5jb25maWdcIiwgeyBhcmdzIDogWyBTdG9yZS5wYXRoIF0gfSk7Ki9cblxuZXhwb3J0IHsgaXNEb25lIH07XG5jb25zb2xlLmdyb3VwRW5kKCk7XG4iXX0=