"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const bhe_1 = require("./bhe");
const MyStore_1 = require("./MyStore");
const MyAlert_1 = require("./MyAlert");
const util = require("./util");
const fs = require("fs");
console.group('Glob.ts');
const BigConfig = new MyStore_1.BigConfigCls(true);
let skipFade = false;
const MainContent = bhe_1.elem({ id: 'main_content' });
const Sidebar = bhe_1.visualbhe({ id: 'sidebar' });
const Title = bhe_1.visualbhe({ id: 'title' });
const Document = bhe_1.elem({ htmlElement: document });
const NavigationButtons = bhe_1.visualbhe({
    id: 'navigation_buttons', children: {
        exit: '.exit',
        minimize: '.minimize',
    }
});
NavigationButtons.exit.click(async () => {
    let options = {
        title: 'Are you sure you want to exit?',
        confirmButtonColor: '#dc3545',
    };
    if (LOG || fs.existsSync(SESSION_PATH_ABS)) {
        options = Object.assign(Object.assign({}, options), { input: "checkbox", inputValue: `delete`, onBeforeOpen: modal => {
                let el = bhe_1.elem({
                    htmlElement: modal,
                    children: { label: '.swal2-label', checkbox: '#swal2-checkbox' }
                });
                el.checkbox.css({ height: '22px', width: '22px' });
                el.label
                    .css({ fontSize: '22px' })
                    .html(`Delete this session's errors dir (${path.relative(ROOT_PATH_ABS, SESSION_PATH_ABS)})`);
            } });
    }
    let { value } = await MyAlert_1.default.big.warning(options);
    console.log({ value });
    let shouldExit = value !== undefined;
    if (value === 1) {
        const rimraf = require('rimraf');
        rimraf(SESSION_PATH_ABS, console.log);
    }
    if (shouldExit)
        util.getCurrentWindow().close();
});
NavigationButtons.minimize.click(() => util.getCurrentWindow().minimize());
async function toggle(action, ...args) {
    const promises = [];
    for (let a of args) {
        switch (a) {
            case "Title":
                promises.push(Title[action]());
                break;
            case "NavigationButtons":
                promises.push(NavigationButtons[action]());
                break;
            case "Sidebar":
                promises.push(Sidebar[action]());
                break;
        }
    }
    return await Promise.all(promises);
}
async function hide(...args) {
    return await toggle("hide", ...args);
}
async function display(...args) {
    return await toggle("display", ...args);
}
console.groupEnd();
exports.default = { skipFade, MainContent, Sidebar, Title, BigConfig, Document, NavigationButtons, hide, display };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2xvYi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkdsb2IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBc0U7QUFDdEUsdUNBQXlDO0FBQ3pDLHVDQUFnQztBQUNoQywrQkFBK0I7QUFDL0IseUJBQXdCO0FBR3hCLE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7QUFFekIsTUFBTSxTQUFTLEdBQUcsSUFBSSxzQkFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pDLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQztBQUNyQixNQUFNLFdBQVcsR0FBRyxVQUFJLENBQUMsRUFBRSxFQUFFLEVBQUcsY0FBYyxFQUFFLENBQUMsQ0FBQztBQUNsRCxNQUFNLE9BQU8sR0FBRyxlQUFTLENBQUMsRUFBRSxFQUFFLEVBQUcsU0FBUyxFQUFFLENBQUMsQ0FBQztBQUM5QyxNQUFNLEtBQUssR0FBRyxlQUFTLENBQUMsRUFBRSxFQUFFLEVBQUcsT0FBTyxFQUFFLENBQTJFLENBQUM7QUFFcEgsTUFBTSxRQUFRLEdBQUcsVUFBSSxDQUFDLEVBQUUsV0FBVyxFQUFHLFFBQVEsRUFBRSxDQUFDLENBQUM7QUFDbEQsTUFBTSxpQkFBaUIsR0FBRyxlQUFTLENBQUM7SUFDaEMsRUFBRSxFQUFHLG9CQUFvQixFQUFFLFFBQVEsRUFBRztRQUNsQyxJQUFJLEVBQUcsT0FBTztRQUNkLFFBQVEsRUFBRyxXQUFXO0tBRXpCO0NBQ0osQ0FBeUUsQ0FBQztBQUMzRSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFO0lBQ3BDLElBQUksT0FBTyxHQUFHO1FBQ1YsS0FBSyxFQUFHLGdDQUFnQztRQUN4QyxrQkFBa0IsRUFBRyxTQUFTO0tBRWpDLENBQUM7SUFDRixJQUFLLEdBQUcsSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLEVBQUc7UUFDMUMsT0FBTyxtQ0FDQSxPQUFPLEtBRVYsS0FBSyxF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b3J0IHsgQmV0dGVySFRNTEVsZW1lbnQsIGVsZW0sIFZpc3VhbEJIRSwgdmlzdWFsYmhlIH0gZnJvbSBcIi4vYmhlXCI7XG5pbXBvcnQgeyBCaWdDb25maWdDbHMgfSBmcm9tIFwiLi9NeVN0b3JlXCI7XG5pbXBvcnQgTXlBbGVydCBmcm9tIFwiLi9NeUFsZXJ0XCI7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gXCIuL3V0aWxcIjtcbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmc1wiXG5cbi8qKmltcG9ydCBHbG9iIGZyb20gJy4vR2xvYicqL1xuY29uc29sZS5ncm91cCgnR2xvYi50cycpO1xuXG5jb25zdCBCaWdDb25maWcgPSBuZXcgQmlnQ29uZmlnQ2xzKHRydWUpO1xubGV0IHNraXBGYWRlID0gZmFsc2U7XG5jb25zdCBNYWluQ29udGVudCA9IGVsZW0oeyBpZCA6ICdtYWluX2NvbnRlbnQnIH0pO1xuY29uc3QgU2lkZWJhciA9IHZpc3VhbGJoZSh7IGlkIDogJ3NpZGViYXInIH0pO1xuY29uc3QgVGl0bGUgPSB2aXN1YWxiaGUoeyBpZCA6ICd0aXRsZScgfSkgYXMgVmlzdWFsQkhFICYgeyBsZXZlbGgzOiBCZXR0ZXJIVE1MRWxlbWVudCwgdHJpYWxoMzogQmV0dGVySFRNTEVsZW1lbnQgfTtcbi8vIEB0cy1pZ25vcmVcbmNvbnN0IERvY3VtZW50ID0gZWxlbSh7IGh0bWxFbGVtZW50IDogZG9jdW1lbnQgfSk7XG5jb25zdCBOYXZpZ2F0aW9uQnV0dG9ucyA9IHZpc3VhbGJoZSh7XG4gICAgaWQgOiAnbmF2aWdhdGlvbl9idXR0b25zJywgY2hpbGRyZW4gOiB7XG4gICAgICAgIGV4aXQgOiAnLmV4aXQnLFxuICAgICAgICBtaW5pbWl6ZSA6ICcubWluaW1pemUnLFxuICAgICAgICBcbiAgICB9XG59KSBhcyBWaXN1YWxCSEUgJiB7IGV4aXQ6IEJldHRlckhUTUxFbGVtZW50LCBtaW5pbWl6ZTogQmV0dGVySFRNTEVsZW1lbnQgfTtcbk5hdmlnYXRpb25CdXR0b25zLmV4aXQuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICB0aXRsZSA6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZXhpdD8nLFxuICAgICAgICBjb25maXJtQnV0dG9uQ29sb3IgOiAnI2RjMzU0NScsXG4gICAgICAgIFxuICAgIH07XG4gICAgaWYgKCBMT0cgfHwgZnMuZXhpc3RzU3luYyhTRVNTSU9OX1BBVEhfQUJTKSApIHtcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBpbnB1dCA6IFwiY2hlY2tib3hcIixcbiAgICAgICAgICAgIGlucHV0VmFsdWUgOiBgZGVsZXRlYCxcbiAgICAgICAgICAgIG9uQmVmb3JlT3BlbiA6IG1vZGFsID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZWwgPSBlbGVtKHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbEVsZW1lbnQgOiBtb2RhbCxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gOiB7IGxhYmVsIDogJy5zd2FsMi1sYWJlbCcsIGNoZWNrYm94IDogJyNzd2FsMi1jaGVja2JveCcgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBlbC5jaGVja2JveC5jc3MoeyBoZWlnaHQgOiAnMjJweCcsIHdpZHRoIDogJzIycHgnIH0pO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBlbC5sYWJlbFxuICAgICAgICAgICAgICAgICAgLmNzcyh7IGZvbnRTaXplIDogJzIycHgnIH0pXG4gICAgICAgICAgICAgICAgICAuaHRtbChgRGVsZXRlIHRoaXMgc2Vzc2lvbidzIGVycm9ycyBkaXIgKCR7cGF0aC5yZWxhdGl2ZShST09UX1BBVEhfQUJTLCBTRVNTSU9OX1BBVEhfQUJTKX0pYCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8vLyAwOiBleGl0IG5vdCBkZWxldGVcbiAgICAvLy8vIDE6IGV4aXQgeWVzIGRlbGV0ZVxuICAgIC8vLy8gdW5kZWZpbmVkOiBjYW5jZWxcbiAgICBsZXQgeyB2YWx1ZSB9ID0gYXdhaXQgTXlBbGVydC5iaWcud2FybmluZyhvcHRpb25zKTtcbiAgICBjb25zb2xlLmxvZyh7IHZhbHVlIH0pO1xuICAgIGxldCBzaG91bGRFeGl0ID0gdmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgICBpZiAoIHZhbHVlID09PSAxICkge1xuICAgICAgICBjb25zdCByaW1yYWYgPSByZXF1aXJlKCdyaW1yYWYnKTtcbiAgICAgICAgcmltcmFmKFNFU1NJT05fUEFUSF9BQlMsIGNvbnNvbGUubG9nKTtcbiAgICB9XG4gICAgaWYgKCBzaG91bGRFeGl0IClcbiAgICAgICAgdXRpbC5nZXRDdXJyZW50V2luZG93KCkuY2xvc2UoKTtcbn0pO1xuTmF2aWdhdGlvbkJ1dHRvbnMubWluaW1pemUuY2xpY2soKCkgPT4gdXRpbC5nZXRDdXJyZW50V2luZG93KCkubWluaW1pemUoKSk7XG5cbmFzeW5jIGZ1bmN0aW9uIHRvZ2dsZShhY3Rpb246IFwiaGlkZVwiIHwgXCJkaXNwbGF5XCIsIC4uLmFyZ3M6IChcIlRpdGxlXCIgfCBcIk5hdmlnYXRpb25CdXR0b25zXCIgfCBcIlNpZGViYXJcIilbXSk6IFByb21pc2U8dW5rbm93bltdPiB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICBmb3IgKCBsZXQgYSBvZiBhcmdzICkge1xuICAgICAgICBzd2l0Y2ggKCBhICkge1xuICAgICAgICAgICAgY2FzZSBcIlRpdGxlXCI6XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChUaXRsZVthY3Rpb25dKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIk5hdmlnYXRpb25CdXR0b25zXCI6XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChOYXZpZ2F0aW9uQnV0dG9uc1thY3Rpb25dKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlNpZGViYXJcIjpcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKFNpZGViYXJbYWN0aW9uXSgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBoaWRlKC4uLmFyZ3M6IChcIlRpdGxlXCIgfCBcIk5hdmlnYXRpb25CdXR0b25zXCIgfCBcIlNpZGViYXJcIilbXSk6IFByb21pc2U8dW5rbm93bltdPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRvZ2dsZShcImhpZGVcIiwgLi4uYXJncyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRpc3BsYXkoLi4uYXJnczogKFwiVGl0bGVcIiB8IFwiTmF2aWdhdGlvbkJ1dHRvbnNcIiB8IFwiU2lkZWJhclwiKVtdKTogUHJvbWlzZTx1bmtub3duW10+IHtcbiAgICByZXR1cm4gYXdhaXQgdG9nZ2xlKFwiZGlzcGxheVwiLCAuLi5hcmdzKTtcbn1cblxuY29uc29sZS5ncm91cEVuZCgpO1xuZXhwb3J0IGRlZmF1bHQgeyBza2lwRmFkZSwgTWFpbkNvbnRlbnQsIFNpZGViYXIsIFRpdGxlLCBCaWdDb25maWcsIERvY3VtZW50LCBOYXZpZ2F0aW9uQnV0dG9ucywgaGlkZSwgZGlzcGxheSB9XG4iXX0=